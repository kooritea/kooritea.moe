const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./xCAb_z-Zl.js","./assets/index-CvIYzVtv.js","./assets/index-LaXGcBtP.css","./x4k-nu6eF.js","./xCXS3Uffm.js","./xDSpHJm7g.js","./vander_commonjsHelpers-CqkleIqs.js","./xezUmWDnz.js","./x-w8SDWlO.js","./xML8-_cHX.js","./x-kMLwP9Y.js","./xleeUjxMt.js","./vander_baseFindIndex-D7XfJLKM.js","./assets/PreviewScreenshots-B76jYR2H.css","./assets/el-scrollbar-BWxh-h6K.css","./assets/el-popper-DG5wR-qi.css","./xIi9-x1Xr.js","./xDE6Pu_SN.js","./assets/MarkDown-BhWfQBYh.css","./xBllqSTRu.js","./assets/ImageCon-lsCsi0ah.css","./xHwUBrbrA.js","./xBNjPam3n.js","./vander_baseIteratee-Dd9zUSwt.js","./xAK0-ZOqg.js","./xDjopf8xY.js","./xDKFoUa4r.js","./assets/MDEditor-DJrw3LGy.css","./assets/el-tag-DljBBxJR.css","./assets/el-select-BaQA8IKP.css","./assets/el-date-picker-BUDvp0ks.css"])))=>i.map(i=>d[i]);
import{_ as S,S as I,m as b,u as E,p as D,r as _,a as B,E as P,s as V,G,b as p,z as x,w as v,f as c,F as C,B as M,H as L,j as i,k as r,l as K,t as N,d as w,e as O,D as W,L as U}from"./assets/index-CvIYzVtv.js";import{P as j}from"./xDxly3N35.js";import{N as H}from"./xCp6Zziu4.js";import{C as T}from"./xJjIqyFK4.js";/* empty css         *//* empty css         */import{E as A}from"./xDKFoUa4r.js";import"./xDE6Pu_SN.js";import"./x-w8SDWlO.js";const F={components:{ElPopover:A,ChaosItem:T,PageHeader:j,NextButton:H,SvgIcon:I,MDEditor:b({loader:()=>W(()=>import("./xCAb_z-Zl.js").then(n=>n.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url),loadingComponent:U})},setup(){const{darkMode:n,isGreatOldOne:o}=E(),{offlineMode:m}=D(),e=_(""),y=B([]),l=B([]),g=_(!1),u=_(!1),k=_(null),f=h=>(u.value=!0,L(h).then(d=>{d=d.map(a=>({...a,id:`${a.author}-${a.id}`,mid:a.id,time:a.date,expend:!1,link:{leoon:"https://www.leoon.cn/moment",gofixpro:"https://blog.gofixpro.fun/",dnick:"https://dnick.cn/",GrayfenXie:"https://www.grayfen.cn/",baymax:"https://ys.xjinfeng.top/essays",yuanmoc:"https://www.yuanmoc.cn/daily/"}[a.author]})),g.value=d.length===10,y.push(...d)}).finally(()=>{u.value=!1}));return f(),P().then(h=>{l.push(...h)}),{loading:u,searchBlogmoments:f,moments:y,statistics:l,searchKeyWord:e,offlineMode:m,hasNext:g,darkMode:n,setScorllGotoTop:V,isGreatOldOne:o,editing:k}},methods:{search(n){if(this.moments.splice(0,this.moments.length),this.offlineMode&&n&&!/^#\d+$/.test(n)){this.$msgBox.error("离线模式下仅可以使用id搜索");return}return this.searchBlogmoments({keyword:n})},onNext(){var o;const n=(o=this.moments[this.moments.length-1])==null?void 0:o.mid;return this.searchBlogmoments({keyword:this.searchKeyWord,start:n?n-1:void 0})},onSubmitUpdatemoment(n,o,m){if(n.mid)return G(n.mid,{content:o?void 0:m,hide:o?m||null:void 0}).then(e=>{Object.assign(n,e),this.editing=null})}}},Q={class:"page"},X={class:"title"},z={class:"rank-box"},R={class:"author"},q={class:"count"};function J(n,o,m,e,y,l){const g=i("svg-icon"),u=i("el-popover"),k=i("PageHeader"),f=i("ChaosItem"),h=i("MDEditor"),d=i("SvgIcon"),a=i("NextButton");return r(),p("div",Q,[x(k,{modelValue:e.searchKeyWord,"onUpdate:modelValue":o[0]||(o[0]=t=>e.searchKeyWord=t),"show-search-input":!0,"on-input":l.search},{title:v(({title:t})=>[c("div",X,[K(N(t)+" ",1),x(u,{width:"",trigger:"click","popper-class":"popper-essay",effect:e.darkMode?"dark":"light"},{reference:v(()=>[x(g,{name:"rank"})]),default:v(()=>[c("div",z,[o[4]||(o[4]=c("div",{class:"name"}," 历史总榜 ",-1)),(r(!0),p(C,null,M(e.statistics,s=>(r(),p("div",{key:s.author,class:"rank"},[c("span",R,N(s.author),1),c("span",q,N(s.count),1)]))),128))])]),_:1},8,["effect"])])]),_:1},8,["modelValue","on-input"]),c("ul",null,[(r(!0),p(C,null,M(e.moments,t=>(r(),p("li",{key:t.mid,class:"moment-box"},[e.editing!==t?(r(),w(f,{key:0,essay:t,isMarkDowm:["leoon","dnick","GrayfenXie","gofixpro"].includes(t.author),safeMode:!0,hasComment:!0,commentQuery:s=>({momentId:s.mid}),onSetSearchKeyWord:o[1]||(o[1]=s=>{e.searchKeyWord=s,e.setScorllGotoTop()})},null,8,["essay","isMarkDowm","commentQuery"])):(r(),w(h,{key:1,"model-value":t.content,cache:!1,"ex-handlers":[{name:"取消",handler:()=>{e.editing=null}}],"on-submit":s=>l.onSubmitUpdatemoment(t,e.darkMode,s)},null,8,["model-value","ex-handlers","on-submit"])),e.isGreatOldOne&&e.editing!==t?(r(),w(d,{key:2,name:"bianji",onClick:s=>e.editing=t},null,8,["onClick"])):O("",!0)]))),128))]),x(a,{hasNext:e.hasNext,"onUpdate:hasNext":o[2]||(o[2]=t=>e.hasNext=t),loading:e.loading,"onUpdate:loading":o[3]||(o[3]=t=>e.loading=t),onLoadingClick:l.onNext},null,8,["hasNext","loading","onLoadingClick"])])}const re=S(F,[["render",J],["__scopeId","data-v-4a61c673"]]);export{re as default};
