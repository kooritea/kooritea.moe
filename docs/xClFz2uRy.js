import{_ as y,S,L as k,r as e,gu as h,aa as L,aj as C,b as t,p as b,T as E,F as V,d as N,e as m,j as v,k as a}from"./assets/index-BT4NDYic.js";import{I as x,_ as F}from"./xBrS9QzJy.js";const P={components:{SvgIcon:S,ImageCon:x,LoadingIcon:k},props:{content:{type:String,default:""}},setup(u){const s=u.content.match(/\[video(-loop)? (.*?)\]/),n=s[2],o=e(!1),l=e(!0),f=e(!1),c=n.slice(0,n.lastIndexOf("."))+".thumbnail",i=e(""),r=e(null),p=e(!1),I=e(!!s[1]),g=e(n.startsWith("http"));g.value?(i.value=n,l.value=!1):h().then(d=>{i.value=d("kooritea/kooritea.github.io",`video${n}`),l.value=!1});const _=new IntersectionObserver(d=>{d[0].isIntersecting||(o.value=!1)});return L(r,()=>{r.value&&_.observe(r.value)}),C(()=>{_.disconnect()}),{isFullSrc:g,videoSrc:i,videoRef:r,thumbnailSrc:c,isNoThumbnail:f,isPlay:o,isLoop:I,isLoading:l,isVideoError:p}}},T={class:"md-video"},B={key:0,class:"thumbnail-box"},w=["autoplay","src","loop"],j={key:2,class:"error-img",src:F};function D(u,s,n,o,l,f){const c=v("ImageCon"),i=v("SvgIcon"),r=v("LoadingIcon");return a(),t("div",T,[!o.isPlay&&!o.isNoThumbnail&&!o.isFullSrc?(a(),t("div",B,[b(c,{ref:"ImageCon",src:`/video${o.thumbnailSrc}`,alt:o.thumbnailSrc,onClick:s[0]||(s[0]=()=>{o.isPlay=!0}),onDragstart:s[1]||(s[1]=E(()=>{},["prevent"])),onError:s[2]||(s[2]=()=>{o.isNoThumbnail=!0})},null,8,["src","alt"]),b(i,{class:"play-icon",name:"play"})])):(a(),t(V,{key:1},[o.isLoading?(a(),N(r,{key:0})):m("",!0),!o.isLoading&&!o.isVideoError?(a(),t("video",{key:1,ref:"videoRef",class:"video",autoplay:!o.isNoThumbnail&&!o.isFullSrc,controls:"",src:o.videoSrc,loop:o.isLoop,onError:s[3]||(s[3]=()=>{o.isVideoError=!0}),onPause:s[4]||(s[4]=()=>{o.isPlay=!1})},null,40,w)):m("",!0),o.isVideoError?(a(),t("img",j)):m("",!0)],64))])}const R=y(P,[["render",D],["__scopeId","data-v-6c2b3287"]]);export{R as default};
