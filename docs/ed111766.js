import{_,L as k,b as o,d as s,f as d,aP as V,w as r,h as p,p as c,g as h,l as v,t as f,aQ as x}from"./assets/index-c593a38b.js";const F={components:{LoadingIcon:k},props:{modelValue:{type:[String,Array],default:void 0},checkMode:{type:String,default:()=>""}},emits:["update:modelValue"],data(){return{loading:!1,useFileFilter:!0,tableData:[],currentPath:"/"}},computed:{filterTableData(){return this.tableData.filter(e=>this.fileFilter&&this.useFileFilter&&e.type==="file"?this.fileFilter(e):!0)}},watch:{modelValue:{immediate:!0,handler(e){if(e){const t=e.slice(0,e.lastIndexOf("/"))||"/";this.currentPath!==t&&this.load(t)}}}},created(){this.load(this.currentPath)},methods:{onCellClick(e,t,a,i){t.property==="name"&&(e.type==="dir"?this.load(e.path):e.type==="file"&&this.$emit("update:modelValue",e.path))},onSelectionChange(){},load(e){this.loading=!0,this.loader(e).then(t=>{this.tableData=[...t].sort((a,i)=>{const n=a.type.localeCompare(i.type);return n!==0?n:a.name.localeCompare(i.name)}),e!=="/"&&this.tableData.unshift({type:"dir",name:"..",path:e.slice(0,e.slice(0,e.length-1).lastIndexOf("/"))||"/"}),this.currentPath=e}).finally(()=>{this.loading=!1})},loader(){throw new Error("loader需实现")}}};function S(e,t,a,i,n,u){const y=o("LoadingIcon"),m=o("el-table-column"),g=o("el-radio"),C=o("el-radio-group"),b=o("el-switch"),w=o("el-table");return s(),d(w,{border:"",data:u.filterTableData,style:{width:"100%"},onCellClick:u.onCellClick,onSelectionChange:u.onSelectionChange},V({default:r(()=>[a.checkMode==="multiple"?(s(),d(m,{key:0,type:"selection",selectable:l=>l.type==="file"},null,8,["selectable"])):h("",!0),a.checkMode==="single"?(s(),d(m,{key:1,width:"40px"},{default:r(l=>[l.row.path===a.modelValue?(s(),d(C,{key:0,"model-value":l.row.path},{default:r(()=>[c(g,{value:l.row.path},null,8,["value"])]),_:2},1032,["model-value"])):h("",!0)]),_:1})):h("",!0),c(m,{"class-name":"filename-cell","show-overflow-tooltip":"",prop:"name",label:"文件名"},{header:r(()=>[v(" 文件名 "),c(b,{modelValue:n.useFileFilter,"onUpdate:modelValue":t[0]||(t[0]=l=>n.useFileFilter=l),"active-text":"打开文件过滤"},null,8,["modelValue"])]),default:r(l=>[p("span",null,f(l.row.type==="dir"?"📁":"📄")+f(l.row.name),1)]),_:1})]),_:2},[n.loading?{name:"empty",fn:r(()=>[p("div",null,[c(y)])]),key:"0"}:void 0]),1032,["data","onCellClick","onSelectionChange"])}const D=_(F,[["render",S]]);const B={extends:D,methods:{loader(e){return x(e).then(t=>t.children)},fileFilter(e){return["mkv","mp4","mov"].includes(e.extname)}}},M=_(B,[["__scopeId","data-v-fbd94c47"]]);export{M};
