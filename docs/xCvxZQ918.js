import{_ as I,S as y,L as S,r as n,bh as k,G as L,an as C,b as i,z as b,Y as E,F as V,d as N,e as m,j as v,k as a}from"./assets/index--A2q1cxs.js";import{I as x}from"./xCT_sqxTy.js";const F=""+new URL("assets/404.png",import.meta.url).href,w={components:{SvgIcon:y,ImageCon:x,LoadingIcon:S},props:{content:{type:String,default:""}},setup(f){const e=f.content.match(/\[video(-loop)? (.*?)\]/),s=e[2],o=n(!1),l=n(!0),u=n(!1),c=s.slice(0,s.lastIndexOf("."))+".thumbnail",t=n(""),r=n(null),p=n(!1),h=n(!!e[1]),g=n(s.startsWith("http"));g.value?(t.value=s,l.value=!1):k().then(d=>{t.value=d("kooritea/kooritea.github.io",`video${s}`),l.value=!1});const _=new IntersectionObserver(d=>{d[0].isIntersecting||(o.value=!1)});return L(r,()=>{r.value&&_.observe(r.value)}),C(()=>{_.disconnect()}),{isFullSrc:g,videoSrc:t,videoRef:r,thumbnailSrc:c,isNoThumbnail:u,isPlay:o,isLoop:h,isLoading:l,isVideoError:p}}},B={class:"md-video"},T={key:0,class:"thumbnail-box"},P=["autoplay","src","loop"],R={key:2,class:"error-img",src:F};function U(f,e,s,o,l,u){const c=v("ImageCon"),t=v("SvgIcon"),r=v("LoadingIcon");return a(),i("div",B,[!o.isPlay&&!o.isNoThumbnail&&!o.isFullSrc?(a(),i("div",T,[b(c,{ref:"ImageCon",src:`/video${o.thumbnailSrc}`,alt:o.thumbnailSrc,onClick:e[0]||(e[0]=()=>{o.isPlay=!0}),onDragstart:e[1]||(e[1]=E(()=>{},["prevent"])),onError:e[2]||(e[2]=()=>{o.isNoThumbnail=!0})},null,8,["src","alt"]),b(t,{class:"play-icon",name:"play"})])):(a(),i(V,{key:1},[o.isLoading?(a(),N(r,{key:0})):m("",!0),!o.isLoading&&!o.isVideoError?(a(),i("video",{key:1,ref:"videoRef",class:"video",autoplay:!o.isNoThumbnail&&!o.isFullSrc,controls:"",src:o.videoSrc,loop:o.isLoop,onError:e[3]||(e[3]=()=>{o.isVideoError=!0})},null,40,P)):m("",!0),o.isVideoError?(a(),i("img",R)):m("",!0)],64))])}const O=I(w,[["render",U],["__scopeId","data-v-f2aaeb3c"]]);export{O as default};
