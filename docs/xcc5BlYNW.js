import{_ as w,r as m,ao as x,v as P,ap as S,b as I,p as C,f as t,t as n,w as g,j as p,k as u,F as b,E as q,d as N,l as j,e as B}from"./assets/index-BT4NDYic.js";/* empty css         *//* empty css         *//* empty css         */import{P as H}from"./xCLrpQEmm.js";import{E as O,a as T,b as U,c as D}from"./xD_b8Qha0.js";import"./xDlj6sYAD.js";import"./xCeBGRBkc.js";import"./xIa4wCVrT.js";import"./xDBIaQG4J.js";import"./vander_baseFindIndex-D7XfJLKM.js";import"./vander_baseIteratee-4H2Zs6Zg.js";import"./xUdmCfoAM.js";const F={components:{PageHeader:H,ElCollapse:O,ElCollapseItem:T,ElSelect:U,ElOption:D},setup(){const o=m(0),e=m([]),d=m([]);return x().then(a=>{console.log(a),o.value=a.length,d.value=a.sort((c,l)=>{var r,f,_,v;return new Date((f=(r=l.accessInfo)==null?void 0:r[0])==null?void 0:f.date)-new Date((v=(_=c.accessInfo)==null?void 0:_[0])==null?void 0:v.date)}),e.value=d.value.filter(c=>c.accessInfo.some(l=>l.requestInfo.url==="/user/knock"))}),{历史客户端数:o,历史有效访客:e,data:d,activeNames:m("")}},methods:{getClientName(o){var c,l,r;const e=(c=o.accessInfo[0].requestClientInfo.clientAddress)==null?void 0:c.ipInfo,d=((l=o.tags)==null?void 0:l.length)>0?`[${o.tags.join(",")}]`:"";let a=`[${P(o.accessInfo[0].date)}]${d} `;return e&&(a+=`(${Array.from(new Set([e.countryCode])).join("|")})`),a+=(r=o.accessInfo[0].requestClientInfo.clientAddress)==null?void 0:r.address,a},updateTags(o){S(o.uuid,{tags:o.tags.join(",")})}}},$={class:"page"},G={class:"item"},L={class:"item"},z={class:"label-value"},J={class:"value"},K={class:"label-value"},M={class:"value"},Q={class:"label-value"},R={class:"value"},W={class:"label-value"},X={class:"value"};function Y(o,e,d,a,c,l){const r=p("PageHeader"),f=p("el-option"),_=p("el-select"),v=p("el-collapse-item"),E=p("el-collapse");return u(),I("div",$,[C(r),t("div",G," 历史访客数："+n(a.历史客户端数),1),t("div",L," 历史有效访客数："+n(a.历史有效访客.length),1),C(E,{modelValue:a.activeNames,"onUpdate:modelValue":e[0]||(e[0]=s=>a.activeNames=s)},{default:g(()=>[(u(!0),I(b,null,q(a.历史有效访客,s=>(u(),N(v,{key:s.fingerprintStore[0].hash,title:"Consistency",name:s.fingerprintStore[0].hash},{title:g(()=>[j(n(l.getClientName(s)),1)]),default:g(()=>{var h,y,A,V,k;return[t("div",null,n(s.accessInfo[0].requestClientInfo.userAgent),1),(h=s.accessInfo[0].requestClientInfo.clientAddress)!=null&&h.ipInfo?(u(),I(b,{key:0},[t("div",z,[e[1]||(e[1]=t("div",{class:"label"}," country: ",-1)),t("div",J,n((y=s.accessInfo[0].requestClientInfo.clientAddress)==null?void 0:y.ipInfo.country),1)]),t("div",K,[e[2]||(e[2]=t("div",{class:"label"}," province: ",-1)),t("div",M,n((A=s.accessInfo[0].requestClientInfo.clientAddress)==null?void 0:A.ipInfo.province),1)]),t("div",Q,[e[3]||(e[3]=t("div",{class:"label"}," city: ",-1)),t("div",R,n((V=s.accessInfo[0].requestClientInfo.clientAddress)==null?void 0:V.ipInfo.city),1)]),t("div",W,[e[4]||(e[4]=t("div",{class:"label"}," isp: ",-1)),t("div",X,n((k=s.accessInfo[0].requestClientInfo.clientAddress)==null?void 0:k.ipInfo.isp),1)])],64)):B("",!0),C(_,{modelValue:s.tags,"onUpdate:modelValue":i=>s.tags=i,clearable:"",multiple:"",filterable:"",allowCreate:"",placeholder:"标签",onChange:i=>l.updateTags(s)},{default:g(()=>[(u(!0),I(b,null,q(s.tags,i=>(u(),N(f,{key:i,label:i,value:i},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]}),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])}const pe=w(F,[["render",Y],["__scopeId","data-v-c40fbc86"]]);export{pe as default};
