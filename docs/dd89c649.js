import{_ as U,L as b,gl as x,u as h,K as w,r as i,a9 as B,gm as F,c as u,b as N,P,d as y,e as k,Q as R,n as S,T as V,g as L,m as z,f as A,h as J}from"./assets/index-306e3e3a.js";const K="/assets/404.png";const M={components:{LoadingIcon:b},directives:{imgFadeEnter:x},props:{loading:{type:Boolean,default:()=>!0},src:{type:String,default:()=>""},alt:{type:String,default:()=>""},source:{type:String,default:()=>"jsdelivr"},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(t,{emit:r,attrs:a}){const{jsdelivrBaseUrl:e}=h(),{computedLoading:l,computedSrc:d,computedLoadingDelay:c}=w(t,r),n=i(0),s=i(!1),g=i(!0),v=i(null),_=()=>{g.value=!0,v.value&&clearTimeout(v.value),v.value=setTimeout(()=>{g.value=!1},c.value)};_(),B(d,()=>{n.value=0,l.value=!0,_()});const m=i([]);F().then(o=>{s.value=!0;const j=e.value?[e.value]:[o];m.value=t.source==="static"?[]:j});const p=u(()=>t.src.startsWith("http")?[t.src]:m.value.length>0?m.value.map(o=>o+d.value):[d.value]),E=u(()=>p.value[n.value]),f=u(()=>n.value>=p.value.length),I=u(()=>f.value?"/assets/404.png":E.value);B(f,o=>{o&&(l.value=!1,typeof a.onError=="function"&&a.onError())});const T=o=>{l.value=!1,typeof a.onLoad=="function"&&a.onLoad(o)},C=o=>{n.value++},D=u(()=>l.value||g.value);return{computedLoadingDelay:c,jsdelivrBaseUrlListReady:s,isLoading:D,imageSrc:E,isError:f,onLoad:T,onError:C,applySrc:I}}},Q=["src","alt","title"];function W(t,r,a,e,l,d){const c=N("LoadingIcon"),n=P("imgFadeEnter");return y(),k("div",{class:S(["image",{["loading-type-"+a.loadingType]:!0,error:e.isError,loading:e.isLoading}])},[!e.isError&&e.jsdelivrBaseUrlListReady?R((y(),k("img",{key:0,class:S(["img",{loading:e.isLoading}]),src:e.imageSrc,alt:a.alt,title:a.alt,onLoad:r[0]||(r[0]=(...s)=>e.onLoad&&e.onLoad(...s)),onError:r[1]||(r[1]=(...s)=>e.onError&&e.onError(...s)),onDragstart:r[2]||(r[2]=V(()=>{},["prevent"]))},null,42,Q)),[[n,a.loadingType==="fade",e.computedLoadingDelay]]):L("",!0),e.isError?z(t.$slots,"error",{key:1},()=>[r[3]||(r[3]=J("img",{class:"img",src:K},null,-1))],!0):L("",!0),e.isLoading&&a.loadingType==="icon"?(y(),A(c,{key:2})):L("",!0)],2)}const G=U(M,[["render",W],["__scopeId","data-v-db163689"]]);export{G as I};
