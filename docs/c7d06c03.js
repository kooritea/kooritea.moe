import{_ as h,u as b,a4 as n,aG as m,aH as f,aD as _,aE as P,aI as w,b as s,d as y,e as g,p as l}from"./assets/index-c593a38b.js";import{P as O}from"./7d864ead.js";import{G as v}from"./e24541eb.js";const x={components:{PageHeader:O,GOORyonaVideoPreviewDialog:v},setup(){const{mobileMode:e}=b();return{mobileMode:e}},data(){return{isExSearch:!1,tableData:[],tableProp:{tableConfig:{handlerWidth:"210px",showPagination:!0,tableProps:{stripe:!0,border:!0},tableHandlerProps:{fixed:void 0},publicTableProps:{showOverflowTooltip:!0},tableSelectionProps:{selectable:e=>!!e.filepath}},emitLoadOnCreate:!0,buttons:[{type:"primary",buttonProps:{link:!0},show:(e,t)=>!t.row.remote,label:"发布",handler:(e,t)=>{n({title:"提示",message:`确认发布${t.row.filepath}`,type:"warning",confirmHandlerPromise:r=>m(t.row.id).then(()=>{this.$refs.EditTable.search()})})}},{type:"primary",buttonProps:{link:!0},label:"查看",handler:(e,t)=>{this.$refs.GOORyonaVideoPreviewDialog.open({sourceSrc:`/video/source/collection/preview/${t.row.id}`})}},{type:"primary",buttonProps:{link:!0},label:"编辑",handler:(e,t)=>{this.$refs.EditTable.editReady(t.row)}},{type:"danger",buttonProps:{link:!0},label:"删除",handler:(e,t)=>{n({title:"提示",message:`确认删除${t.row.filepath}`,type:"warning",confirmHandlerPromise:r=>f(t.row.id).then(()=>{this.$refs.EditTable.search()})})}}]},searchFormProp:{formConfig:{labelWidth:"100px",labelPosition:"right",gutter:32}},fields:[{type:"select",label:"ID",prop:"id",span:this.mobileMode?24:12,tableProps:{width:60},showInForm:!1},{type:"input",prop:"title",label:"标题",showInForm:!1},{type:"buttons",showInTable:!1,showInForm:e=>e.meta.isSearchForm===!0,hiddenLabel:!0,label:"搜索操作",prop:"搜索操作",span:6,formItemProp:{labelWidth:"0px"},buttons:[{label:e=>this.isExSearch?"收起":"展开",leftIcon:e=>this.isExSearch?_:P,type:"primary",buttonProps:{link:!0},handler:e=>{this.isExSearch=!this.isExSearch}},{label:"查询",type:"primary",handler:e=>{const{meta:t}=e,{_editTable:r}=t,{editTableInstance:a}=r;a.search()}},{label:"重置",type:"primary",buttonProps:{plain:!0},handler:e=>{const{meta:t}=e,{_editTable:r}=t,{editTableInstance:a}=r;a.search({reset:!0})}}]}]}},methods:{onLoad(e,t){return w({size:e.size,page:e.current}).then(r=>({tableData:r.records,total:r.total}))}}},D={class:"page"};function I(e,t,r,a,o,i){const p=s("PageHeader"),d=s("edit-table"),c=s("GOORyonaVideoPreviewDialog");return y(),g("div",D,[l(p),l(d,{ref:"EditTable",modelValue:o.tableData,"onUpdate:modelValue":t[0]||(t[0]=u=>o.tableData=u),"show-search-form":!0,fields:o.fields,"table-prop":o.tableProp,"search-form-prop":o.searchFormProp,"search-loader":i.onLoad},null,8,["modelValue","fields","table-prop","search-form-prop","search-loader"]),l(c,{ref:"GOORyonaVideoPreviewDialog"},null,512)])}const C=h(x,[["render",I],["__scopeId","data-v-3bf91772"]]);export{C as default};
