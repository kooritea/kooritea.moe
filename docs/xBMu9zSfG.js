import{P as B}from"./xCLrpQEmm.js";import{N as x}from"./xBhCXCpc3.js";import{_ as C,X as k,A as N,r as h,a as M,b as v,p as d,f as s,F as V,E as I,d as W,e as w,O as A,af as P,j as i,k as p,t as c,w as K,l as L,ag as Y,ah as D}from"./assets/index-BT4NDYic.js";/* empty css         *//* empty css         *//* empty css         */import{I as E}from"./xBrS9QzJy.js";import{E as T}from"./xBCeQx6BW.js";import"./xDSpHJm7g.js";import"./vander_commonjsHelpers-CqkleIqs.js";import"./xB4gK6Vir.js";import"./xCeBGRBkc.js";import"./xDBIaQG4J.js";import"./xIa4wCVrT.js";import"./xUdmCfoAM.js";const U={components:{ImageCon:E,NextButton:x,PageHeader:B,TextInput:k,ElDatePicker:T,AsyncButtom:N},setup(){const l=h(""),n=h(""),a=M([]),t=h(!0),r=h(!1),u=()=>{if(n.value)return r.value=!0,Y(n.value,a.length?a.length+1:0).then(o=>{a.push(...o),t.value=o.length===24}).finally(()=>{r.value=!1})},m=()=>{if(l.value)return r.value=!0,D(l.value,a.length/24+1).then(o=>{a.push(...o),t.value=o.length===24}).finally(()=>{r.value=!1})};return{yearMonth:l,keyWord:n,onKeyWordChange:o=>{l.value="",a.splice(0,a.length),t.value=!0,u()},onMonthChange:o=>{n.value="",t.value=!0,a.splice(0,a.length),m()},listData:a,hasNext:t,switchBangumiAdded:o=>o.id?A(o.id).then(()=>{o.id=null}):(delete o.id,P(o).then(e=>{o.id=e.id})),loading:r,onNext:()=>{if(n.value)return u();if(l.value)return m()}}}},H={class:"page"},O={class:"search-box"},j={class:"bangumi-list"},F={class:"left"},R={class:"info"},G={class:"name"},S={class:"nname"},X={class:"episode-time"},q={class:"right"};function z(l,n,a,t,r,u){const m=i("PageHeader"),g=i("el-date-picker"),_=i("TextInput"),f=i("ImageCon"),y=i("AsyncButtom"),o=i("NextButton");return p(),v("div",H,[d(m),s("div",O,[d(g,{modelValue:t.yearMonth,"onUpdate:modelValue":n[0]||(n[0]=e=>t.yearMonth=e),type:"month",placeholder:"按月份搜索","value-format":"YYYY-M",onChange:t.onMonthChange},null,8,["modelValue","onChange"]),d(_,{modelValue:t.keyWord,"onUpdate:modelValue":n[1]||(n[1]=e=>t.keyWord=e),"on-input":t.onKeyWordChange},null,8,["modelValue","on-input"])]),s("div",j,[(p(!0),v(V,null,I(t.listData,e=>(p(),v("div",{key:e.subject,class:"bangumi"},[s("div",F,[d(f,{src:`https://lain.bgm.tv/pic/cover/c${e.img}`,prefix:[""],onClick:J=>l.$imagePreview(`https://lain.bgm.tv/pic/cover/l${e.img}`,{fileName:e.name||e.nname})},null,8,["src","onClick"]),s("div",R,[s("div",G,c(e.name),1),s("div",S,c(e.nname),1),s("div",X,c(e.episode?`${e.episode}集`:"")+" "+c(e.time),1)])]),s("div",q,[d(y,{type:e.id?"primary":"default",onLoadingClick:()=>t.switchBangumiAdded(e)},{default:K(()=>[L(c(e.id?"已添加":"添加"),1)]),_:2},1032,["type","onLoadingClick"])])]))),128))]),t.keyWord||t.yearMonth?(p(),W(o,{key:0,hasNext:t.hasNext,"onUpdate:hasNext":n[2]||(n[2]=e=>t.hasNext=e),loading:t.loading,"onUpdate:loading":n[3]||(n[3]=e=>t.loading=e),onLoadingClick:t.onNext},null,8,["hasNext","loading","onLoadingClick"])):w("",!0)])}const me=C(U,[["render",z],["__scopeId","data-v-ca5a65b7"]]);export{me as default};
