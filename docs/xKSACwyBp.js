import{_,r as s,a as f,b as x,z as v,d as y,e as H,a6 as g,a1 as m,a7 as k,j as V,k as E}from"./assets/index-XuEPjZ2L.js";import{P}from"./xNGTsYP0D.js";import{M,u as D}from"./xCxyWslFj.js";import"./xgsQJOKWn.js";/* empty css         *//* empty css         */import"./xFcik7e6W.js";import"./xDSpHJm7g.js";import"./vander_commonjsHelpers-CqkleIqs.js";import"./xDrx6yAow.js";import"./xMvSHQ776.js";import"./xC1y7WPSF.js";import"./xBWWJZEeI.js";import"./xH0aXhqTP.js";import"./vander_baseFindIndex-D7XfJLKM.js";import"./xDvOxsg3E.js";import"./xBAEHhs_B.js";import"./xCBJFtePz.js";/* empty css         *//* empty css         */import"./xDhYUEHJ8.js";import"./xHiUcIgGO.js";import"./vander_baseIteratee-C9OtqiIY.js";import"./x7oBk5Uup.js";/* empty css         */import"./xBg8kLjh3.js";import"./xBMRLZB1x.js";const A={components:{PageHeader:P,MDEditor:M},setup(b){const t=s(!1),i=s(null),e=s(null),l=s(""),n=s(""),c=a=>{const u=a==="white"?i:e;return f([{name:()=>"插入媒体",type:"default",sort:1,handler:()=>{g({title:"插入媒体内容",showInput:!0,inputType:"textarea",confirmHandlerPromise:p=>{var h;const w=(h=p.inputValue.match(/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g))==null?void 0:h[0],r=new URL(w);if(r.host.includes("music")&&r.host.includes("163")){if(r.host==="music.163.com"){const o=r.href.match(/id=(\d+)/)[1];u.value.insertText(`[music ${o}]`);return}if(r.host==="y.music.163.com"){const o=r.pathname.match(/(\d+)\/?$/)[1];u.value.insertText(`[music ${o}]`);return}}if(r.host.includes("bilibili")){const o=r.href.match(/(BV|AV|av|bv)([a-z0-9A-Z]+)/)[0];u.value.insertText(`[bilibili ${o}]`);return}if(r.host.includes("youtube")){const o=r.pathname.slice(r.pathname.lastIndexOf("/")+1);u.value.insertText(`[youtube ${o}]`);return}throw new Error},errorHanlder(p){m.error("没有匹配的媒体类型")}})}}])},d=f([{name:()=>t.value?"关闭深色模式":"深色模式",type:"default",sort:30,handler:()=>{t.value=!t.value}},{name:"提交预约",type:"primary",sort:40,handler:()=>{D(a=>k(l.value,t.value&&n.value?n.value:void 0,a.value).then(()=>{m.success("预约成功")}).then(()=>{i.value.submitHandler(),e.value&&e.value.submitHandler()}))}},{name:"提交",type:"primary",sort:40,handler:()=>{if(!l.value){m.warning("正文内容不能为空");return}return k(l.value,t.value&&n.value?n.value:void 0).then(()=>{m.success("发表成功")}).then(()=>{i.value.submitHandler(),e.value&&e.value.submitHandler()})}}]);return{addDarkMode:t,handlers:d,getPublicHandlers:c,whiteEditor:i,darkEditor:e,whiteEditorValue:l,darkEditorValue:n}}},B={class:"page"};function T(b,t,i,e,l,n){const c=V("PageHeader"),d=V("MDEditor");return E(),x("div",B,[v(c),v(d,{ref:"whiteEditor",modelValue:e.whiteEditorValue,"onUpdate:modelValue":t[0]||(t[0]=a=>e.whiteEditorValue=a),cache:"white-mode","show-default-handlers":["reset","clean"],"ex-handlers":[...e.getPublicHandlers("white"),...e.addDarkMode?[]:e.handlers]},null,8,["modelValue","ex-handlers"]),e.addDarkMode?(E(),y(d,{key:0,ref:"darkEditor",modelValue:e.darkEditorValue,"onUpdate:modelValue":t[1]||(t[1]=a=>e.darkEditorValue=a),cache:"dark-mode",title:"深色模式内容","show-default-handlers":["reset","clean"],"ex-handlers":[...e.getPublicHandlers("dark"),...e.addDarkMode?e.handlers:[]]},null,8,["modelValue","ex-handlers"])):H("",!0)])}const ie=_(A,[["render",T],["__scopeId","data-v-7f8150e5"]]);export{ie as default};
