import{_ as h,S as y,L as S,r as s,gx as k,ac as L,al as V,b as t,z as b,V as C,F as E,d as x,e as m,j as v,k as a}from"./assets/index-BnMqoHr3.js";import{I as N,_ as F}from"./xBCSZYKYx.js";const B={components:{SvgIcon:y,ImageCon:N,LoadingIcon:S},props:{content:{type:String,default:""}},setup(f){const e=f.content.match(/\[video(-loop)? (.*?)\]/),n=e[2],o=s(!1),l=s(!0),u=s(!1),c=n.slice(0,n.lastIndexOf("."))+".thumbnail",i=s(""),r=s(null),p=s(!1),I=s(!!e[1]),g=s(n.startsWith("http"));g.value?(i.value=n,l.value=!1):k().then(d=>{i.value=d("kooritea/kooritea.github.io",`video${n}`),l.value=!1});const _=new IntersectionObserver(d=>{d[0].isIntersecting||(o.value=!1)});return L(r,()=>{r.value&&_.observe(r.value)}),V(()=>{_.disconnect()}),{isFullSrc:g,videoSrc:i,videoRef:r,thumbnailSrc:c,isNoThumbnail:u,isPlay:o,isLoop:I,isLoading:l,isVideoError:p}}},T={class:"md-video"},w={key:0,class:"thumbnail-box"},P=["autoplay","src","loop"],D={key:2,class:"error-img",src:F};function M(f,e,n,o,l,u){const c=v("ImageCon"),i=v("SvgIcon"),r=v("LoadingIcon");return a(),t("div",T,[!o.isPlay&&!o.isNoThumbnail&&!o.isFullSrc?(a(),t("div",w,[b(c,{ref:"ImageCon",src:`/video${o.thumbnailSrc}`,alt:o.thumbnailSrc,onClick:e[0]||(e[0]=()=>{o.isPlay=!0}),onDragstart:e[1]||(e[1]=C(()=>{},["prevent"])),onError:e[2]||(e[2]=()=>{o.isNoThumbnail=!0})},null,8,["src","alt"]),b(i,{class:"play-icon",name:"play"})])):(a(),t(E,{key:1},[o.isLoading?(a(),x(r,{key:0})):m("",!0),!o.isLoading&&!o.isVideoError?(a(),t("video",{key:1,ref:"videoRef",class:"video",autoplay:!o.isNoThumbnail&&!o.isFullSrc,controls:"",src:o.videoSrc,loop:o.isLoop,onError:e[3]||(e[3]=()=>{o.isVideoError=!0})},null,40,P)):m("",!0),o.isVideoError?(a(),t("img",D)):m("",!0)],64))])}const U=h(B,[["render",M],["__scopeId","data-v-f2aaeb3c"]]);export{U as default};
