import{_ as M,a5 as C,a6 as E,r as B,K as F,b as n,d as s,f as m,w as d,e as c,E as L,p as r,g as k,l as b,F as O,A as I,L as P,a as V,a7 as x,a0 as S,a8 as G,h as R}from"./assets/index-306e3e3a.js";import{P as A}from"./ddd14f69.js";import{M as j}from"./e67b0458.js";/* empty css        */import{E as q,a as N}from"./c696e7e4.js";import{E as U,a as H,b as K,c as T}from"./df7521c1.js";/* empty css        *//* empty css        */import"./vander_commonjsHelpers-87174ba5.js";import"./vander_baseClone-5fcfd646.js";import"./3dbc5647.js";import"./vander_initCloneObject-e11354cf.js";import"./72dd6bb4.js";import"./544768d5.js";const z={components:{ElForm:q,ElFormItem:N,ElInput:C,ElRadioGroup:U,ElRadio:H,ButtonBox:E},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(a,{emit:e}){const i=B(null),{computedModelValue:o}=F(a,e);return{computedModelValue:o,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(u=>{i.value.validate((p,_)=>{p&&(typeof a.onSubmit=="function"?u(a.onSubmit(o.value)):u())})})}],form:i}}};function D(a,e,i,o,g,u){const p=n("el-input"),_=n("el-radio"),w=n("el-radio-group"),f=n("el-form-item"),h=n("ButtonBox"),y=n("el-form");return s(),m(y,{ref:"form",model:o.computedModelValue,"label-position":"top"},{default:d(()=>[(s(!0),c(O,null,L(i.fields,l=>(s(),c("div",{key:l.prop},[r(f,{label:l.label,prop:l.prop,required:l.required},{default:d(()=>[l.type==="input"?(s(),m(p,{key:0,modelValue:o.computedModelValue[l.prop],"onUpdate:modelValue":t=>o.computedModelValue[l.prop]=t},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),l.type==="boolean"?(s(),m(w,{key:1,modelValue:o.computedModelValue[l.prop],"onUpdate:modelValue":t=>o.computedModelValue[l.prop]=t},{default:d(()=>[r(_,{border:"",value:!0},{default:d(()=>e[0]||(e[0]=[b(" 是 ")])),_:1}),r(_,{border:"",value:!1},{default:d(()=>e[1]||(e[1]=[b(" 否 ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1032,["label","prop","required"])]))),128)),o.handlers.length>0?(s(),m(h,{key:0,handlers:o.handlers},null,8,["handlers"])):k("",!0)]),_:1},8,["model"])}const J=M(z,[["render",D]]);const Q={components:{AsyncButtom:I,PageHeader:A,Markdown:j,GOOMabinogionFields:J,ElTable:K,ElTableColumn:T,LoadingIcon:P},setup(){const a=V([]),e=V([]),i=B(!0),o=()=>(i.value=!0,G().then(g=>{e.splice(0,e.length),e.push(...g);for(const u of e)u.fields.length<5&&a.push(u.uuid)}).finally(()=>{i.value=!1}));return o(),{loading:i,expandRowKeys:a,realtodos:e,load:o}},methods:{onSubmit(a,e){return x(a.row.uuid,{type:"resolve",data:e}).then(()=>(S.success("处理成功"),this.load()))},reject(a,e){return x(a.row.uuid,{type:"reject",reason:e.inputValue}).then(()=>this.load())}}},W={class:"page"},X={key:1},Y={class:"preview"},Z={key:0,class:"desp"},$={key:1,class:"quick-boolean"};function ee(a,e,i,o,g,u){const p=n("PageHeader"),_=n("LoadingIcon"),w=n("Markdown"),f=n("AsyncButtom"),h=n("GOOMabinogionFields"),y=n("el-table-column"),l=n("el-table");return s(),c("div",W,[r(p),r(l,{border:"",data:o.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":o.expandRowKeys},{empty:d(()=>[o.loading?(s(),m(_,{key:0})):(s(),c("span",X," 暂无数据 "))]),default:d(()=>[r(y,{type:"expand"},{default:d(t=>[R("div",Y,[t.row.desp?(s(),c("div",Z,[r(w,{"model-value":t.row.desp},null,8,["model-value"])])):k("",!0),t.row.fields.length===1&&t.row.fields[0].type==="boolean"?(s(),c("div",$,[r(f,{type:"primary",onLoadingClick:()=>u.onSubmit(t,{[t.row.fields[0].prop]:!0})},{default:d(()=>e[0]||(e[0]=[b(" 是 ")])),_:2},1032,["onLoadingClick"]),r(f,{type:"default",onLoadingClick:()=>u.onSubmit(t,{[t.row.fields[0].prop]:!1})},{default:d(()=>e[1]||(e[1]=[b(" 否 ")])),_:2},1032,["onLoadingClick"])])):(s(),m(h,{key:2,fields:t.row.fields,"on-submit":v=>u.onSubmit(t,v)},null,8,["fields","on-submit"]))])]),_:1}),r(y,{prop:"name",label:"描述"}),r(y,{label:"操作",width:"120px"},{default:d(t=>[r(f,{type:"danger",size:"mini",onLoadingClick:v=>u.reject(t,v),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:d(()=>e[2]||(e[2]=[b(" 拒绝 ")])),_:2},1032,["onLoadingClick"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const fe=M(Q,[["render",ee],["__scopeId","data-v-2b1c8f98"]]);export{fe as default};
