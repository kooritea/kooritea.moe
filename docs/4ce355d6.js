import{_ as I,L as h,gp as R,K as w,r as i,aa as E,gq as x,c as u,b as U,P as b,d as m,e as k,Q as j,n as S,T as F,g as y,m as N,f as P,h as V}from"./assets/index-353ffc4b.js";const q=""+new URL("assets/404.png",import.meta.url).href;const z={components:{LoadingIcon:h},directives:{imgFadeEnter:R},props:{loading:{type:Boolean,default:()=>!0},src:{type:String,default:()=>""},alt:{type:String,default:()=>""},source:{type:String,default:()=>"jsdelivr"},sourceRepo:{type:String,default:()=>"kooritea/kooritea.github.io"},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(t,{emit:r,attrs:o}){const{computedLoading:e,computedSrc:s,computedLoadingDelay:c}=w(t,r),l=i(0),d=i(!1),n=i(!0),g=i(null),L=()=>{n.value=!0,g.value&&clearTimeout(g.value),g.value=setTimeout(()=>{n.value=!1},c.value)};L(),E(s,()=>{l.value=0,e.value=!0,L()});const v=i([]);x().then(a=>{d.value=!0,v.value=t.source==="static"?[]:[a]});const p=u(()=>t.src.startsWith("http")?[t.src]:v.value.length>0?v.value.map(a=>typeof a=="function"?a(t.sourceRepo,s.value):a+s.value):[s.value]),_=u(()=>p.value[l.value]),f=u(()=>l.value>=p.value.length),B=u(()=>f.value?"/assets/404.png":_.value);E(f,a=>{a&&(e.value=!1,typeof o.onError=="function"&&o.onError())});const T=a=>{e.value=!1,typeof o.onLoad=="function"&&o.onLoad(a)},C=a=>{l.value++},D=u(()=>e.value||n.value);return{computedLoadingDelay:c,jsdelivrBaseUrlListReady:d,isLoading:D,imageSrc:_,isError:f,onLoad:T,onError:C,applySrc:B}}},H=["src","alt","title"];function J(t,r,o,e,s,c){const l=U("LoadingIcon"),d=b("imgFadeEnter");return m(),k("div",{class:S(["image",{["loading-type-"+o.loadingType]:!0,error:e.isError,loading:e.isLoading}])},[!e.isError&&e.jsdelivrBaseUrlListReady?j((m(),k("img",{key:0,class:S(["img",{loading:e.isLoading}]),src:e.imageSrc,alt:o.alt,title:o.alt,onLoad:r[0]||(r[0]=(...n)=>e.onLoad&&e.onLoad(...n)),onError:r[1]||(r[1]=(...n)=>e.onError&&e.onError(...n)),onDragstart:r[2]||(r[2]=F(()=>{},["prevent"]))},null,42,H)),[[d,o.loadingType==="fade",e.computedLoadingDelay]]):y("",!0),e.isError?N(t.$slots,"error",{key:1},()=>[r[3]||(r[3]=V("img",{class:"img",src:q},null,-1))],!0):y("",!0),e.isLoading&&o.loadingType==="icon"?(m(),P(l,{key:2})):y("",!0)],2)}const M=I(z,[["render",J],["__scopeId","data-v-ca8388e3"]]);export{M as I,q as _};
