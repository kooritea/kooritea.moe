import{_ as u,S as w,r as g,j as r,k as t,b as i,H as b,z as k,e as B,n as v,u as M,p as D,I as x,L as E,J as L,f as d,w as l,t as c,d as y}from"./assets/index-CulBNc66.js";import{M as H}from"./xBxtHyue2.js";/* empty css         *//* empty css         */import{E as N}from"./xBaZfDo9S.js";const P={components:{SvgIcon:w},setup(){return{isSimplifty:g(!1)}},mounted(){this.$el.offsetHeight>600&&(this.isSimplifty=!0)}},j={key:0,class:"simplifty-mask"};function z(s,n,e,a,S,m){const f=r("SvgIcon");return t(),i("div",{class:v(["simplifty-box",{"is-simplifty":a.isSimplifty}])},[b(s.$slots,"default",{},void 0,!0),a.isSimplifty?(t(),i("div",j,[k(f,{name:"zhankai",class:"expend-button",onClick:n[0]||(n[0]=p=>a.isSimplifty=!1)})])):B("",!0)],2)}const V=u(P,[["render",z],["__scopeId","data-v-7afa2ae9"]]);function K(s,n){const{darkMode:e}=M(),{darkModeDecodeKey:a}=D();return e.value&&(s.hide||n)?s.id?x(s.hide,a.value):s.hide:s.content}const O={components:{Markdown:H,SimpliftyBox:V,LoadingIcon:E,"el-popover":N},props:{essay:{type:Object,required:!0},essayMap:{type:Object,default:()=>({})},inPopover:{type:Boolean,default:!1},unsafeMode:{type:Boolean,default:!1}},emits:["set-search-key-word","load-essay-by-id"],setup(){const{darkMode:s}=M();return{darkMode:s,formatDate:L,Error}},methods:{getEssayContent:K}},q={class:"essay"},A={key:0,class:"unsafe-content"},J=["onClick"],T={class:"hashtag"},U={key:0,class:"loading-box"},W={key:1},F={class:"info"},G={class:"essay-id"};function Q(s,n,e,a,S,m){const f=r("LoadingIcon"),p=r("ChaosItem",!0),C=r("el-popover"),h=r("Markdown"),I=r("SimpliftyBox");return t(),i("div",q,[d("article",{class:v(["article",{"in-popover":e.inPopover}])},[k(I,null,{default:l(()=>[e.essay.unsafe||e.unsafeMode?(t(),i("div",A,c(e.essay.content),1)):(t(),y(h,{key:1,"model-value":m.getEssayContent(e.essay)},{hashtag:l(({hashtag:o})=>[!/^#\d+$/.test(o)||e.inPopover?(t(),i("span",{key:0,class:"hashtag",onClick:_=>s.$emit("set-search-key-word",o)},c(o),9,J)):(t(),y(C,{key:1,width:"",trigger:"click","popper-class":"popper-essay",effect:a.darkMode?"dark":"light",onShow:()=>{e.essayMap[o.slice(1)]||s.$emit("load-essay-by-id",o.slice(1))}},{reference:l(()=>[d("span",T,c(o),1)]),default:l(()=>[!e.essayMap[o.slice(1)]||e.essayMap[o.slice(1)]instanceof Error?(t(),i("div",U,[e.essayMap[o.slice(1)]?(t(),i("span",W,c(e.essayMap[o.slice(1)].message),1)):(t(),y(f,{key:0}))])):(t(),y(p,{key:1,essay:e.essayMap[o.slice(1)],"essay-map":e.essayMap,"in-popover":!0,onSetSearchKeyWord:n[0]||(n[0]=_=>{s.$emit("set-search-key-word",_)})},null,8,["essay","essay-map"]))]),_:2},1032,["effect","onShow"]))]),_:1},8,["model-value"]))]),_:1})],2),d("div",F,[d("span",G,"#"+c(e.essay.id||"预约中"),1),d("span",null,c(a.formatDate(e.essay.time,`yyyy-MM-dd HH:mm:ss UTC ${a.darkMode?"NDD":"DD"}`)),1)])])}const ee=u(O,[["render",Q],["__scopeId","data-v-72331a4b"]]);export{ee as C,K as g};
