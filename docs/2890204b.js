import{_ as p,L as x,A as I,u as L,r as l,a as b,o as C,c as B,b as f,d as e,e as c,f as k,g as n,h as g,F as H,t as _,n as A,i as E,w as N,j as P,k as V,l as j}from"./assets/index-6e8a4740.js";import{I as w}from"./cc2a1798.js";const z={components:{ImageCon:w,LoadingIcon:x,AsyncButtom:I},setup(){const{mobileMode:v}=L(),i=l(!0),d=l(!0),o=l(!0),m=b({}),h=l(0),s=l(0),t=b([]),r=()=>(d.value=!0,P(V(t).then(a=>{t.includes(a.id)?t.splice(0,t.length):t.push(a.id),Object.assign(m,a)}),500).then(()=>{d.value=!1,o.value=!1}));r(),C(()=>{var a,y;h.value=(a=s.value)!=null&&a.clientHeight?`${(y=s.value)==null?void 0:y.clientHeight}px`:"unset"});const u=B(()=>i.value||d.value);return{mobileMode:v,imageLoading:i,firstLoading:o,hitokoto:m,loading:u,ElInfo:s,infoHeight:h,reload:r}}},F={class:"home"},M={ref:"ElInfo",class:"info"},S={key:0,class:"cn-text"},T={key:1,class:"text"},U={key:2,class:"author-title"},D={class:"author"},O={class:"title"};function q(v,i,d,o,m,h){const s=f("ImageCon"),t=f("LoadingIcon"),r=f("AsyncButtom");return e(),c("div",F,[o.hitokoto.id?(e(),k(s,{key:0,loading:o.imageLoading,"onUpdate:loading":i[0]||(i[0]=u=>o.imageLoading=u),src:`/kooritea/kooritea.github.io/img${o.mobileMode&&o.hitokoto.mobile?o.hitokoto.mobile:o.hitokoto.pc}`,"loading-type":"fade","loading-delay":200},null,8,["loading","src"])):n("",!0),g("div",{class:A(["info-box",{loading:o.loading}]),style:E({height:o.infoHeight})},[g("div",M,[o.loading?n("",!0):(e(),c(H,{key:0},[o.loading?n("",!0):(e(),c("div",S,_(o.hitokoto.cnText),1)),o.loading?n("",!0):(e(),c("div",T,_(o.hitokoto.text),1)),o.loading?n("",!0):(e(),c("div",U,[g("span",D,_(o.hitokoto.author),1),g("span",O,_(o.hitokoto.title),1)]))],64)),o.loading?(e(),k(t,{key:1})):n("",!0)],512)],6),o.firstLoading?n("",!0):(e(),k(r,{key:1,class:"reload-button",type:"info",onLoadingClick:o.reload},{default:N(()=>[j(" 换一张 ")]),_:1},8,["onLoadingClick"]))])}const K=p(z,[["render",q],["__scopeId","data-v-b70d01ab"]]);export{K as default};
