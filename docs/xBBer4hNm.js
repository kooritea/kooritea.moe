import{_ as h,S as y,L as S,r as s,gu as k,aa as L,aj as C,b as t,p as b,T as E,F as V,d as N,e as m,j as v,k as r}from"./assets/index-BtZJFWXm.js";import{I as x,_ as F}from"./xBu7t7ys6.js";const T={components:{SvgIcon:y,ImageCon:x,LoadingIcon:S},props:{content:{type:String,default:""}},setup(u){const e=u.content.match(/\[video(-loop)? (.*?)\]/),n=e[2],o=s(!1),l=s(!0),f=s(!1),c=n.slice(0,n.lastIndexOf("."))+".thumbnail",i=s(""),a=s(null),p=s(!1),I=s(!!e[1]),g=s(n.startsWith("http"));g.value?(i.value=n,l.value=!1):k().then(d=>{i.value=d("kooritea/kooritea.github.io",`video${n}`),l.value=!1});const _=new IntersectionObserver(d=>{d[0].isIntersecting||(o.value=!1)});return L(a,()=>{a.value&&_.observe(a.value)}),C(()=>{_.disconnect()}),{isFullSrc:g,videoSrc:i,videoRef:a,thumbnailSrc:c,isNoThumbnail:f,isPlay:o,isLoop:I,isLoading:l,isVideoError:p}}},B={class:"md-video"},w={key:0,class:"thumbnail-box"},P=["autoplay","src","loop"],j={key:2,class:"error-img",src:F};function D(u,e,n,o,l,f){const c=v("ImageCon"),i=v("SvgIcon"),a=v("LoadingIcon");return r(),t("div",B,[!o.isPlay&&!o.isNoThumbnail&&!o.isFullSrc?(r(),t("div",w,[b(c,{ref:"ImageCon",src:`/video${o.thumbnailSrc}`,alt:o.thumbnailSrc,onClick:e[0]||(e[0]=()=>{o.isPlay=!0}),onDragstart:e[1]||(e[1]=E(()=>{},["prevent"])),onError:e[2]||(e[2]=()=>{o.isNoThumbnail=!0})},null,8,["src","alt"]),b(i,{class:"play-icon",name:"play"})])):(r(),t(V,{key:1},[o.isLoading?(r(),N(a,{key:0})):m("",!0),!o.isLoading&&!o.isVideoError?(r(),t("video",{key:1,ref:"videoRef",class:"video",autoplay:!o.isNoThumbnail&&!o.isFullSrc,controls:"",src:o.videoSrc,loop:o.isLoop,onError:e[3]||(e[3]=()=>{o.isVideoError=!0})},null,40,P)):m("",!0),o.isVideoError?(r(),t("img",j)):m("",!0)],64))])}const R=h(T,[["render",D],["__scopeId","data-v-f2aaeb3c"]]);export{R as default};
