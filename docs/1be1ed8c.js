import{_ as w,r as d,a as f,b as v,d as _,e as x,p as V,f as g,g as y,a2 as H,a0 as c,a3 as k}from"./assets/index-bdcb8a58.js";import{P}from"./5ced25cd.js";import{M,u as D}from"./1335fe32.js";import"./c0f22d05.js";import"./vander_commonjsHelpers-87174ba5.js";import"./b2c5e813.js";/* empty css        *//* empty css        *//* empty css        */import"./9e1f5076.js";import"./02b52d33.js";import"./7ac2643c.js";import"./a1f3434b.js";import"./9e195059.js";import"./35c12a3c.js";const A={components:{PageHeader:P,MDEditor:M},setup(E){const t=d(!1),l=d(null),e=d(null),s=d(""),n=d(""),m=r=>{const u=r==="white"?l:e;return f([{name:()=>"插入媒体",type:"default",sort:1,handler:()=>{H({title:"插入媒体内容",showInput:!0,inputType:"textarea",confirmHandlerPromise:h=>{var p;const b=(p=h.inputValue.match(/(https?|http|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g))==null?void 0:p[0],a=new URL(b);if(a.host.includes("music")&&a.host.includes("163")){if(a.host==="music.163.com"){const o=a.href.match(/id=(\d+)/)[1];u.value.insertText(`[music ${o}]`);return}if(a.host==="y.music.163.com"){const o=a.pathname.match(/(\d+)\/?$/)[1];u.value.insertText(`[music ${o}]`);return}}if(a.host.includes("bilibili")){const o=a.href.match(/(BV|AV|av|bv)([a-z0-9A-Z]+)/)[0];u.value.insertText(`[bilibili ${o}]`);return}if(a.host.includes("youtube")){const o=a.pathname.slice(a.pathname.lastIndexOf("/")+1);u.value.insertText(`[youtube ${o}]`);return}throw new Error},errorHanlder(h){c.error("没有匹配的媒体类型")}})}}])},i=f([{name:()=>t.value?"关闭深色模式":"深色模式",type:"default",sort:30,handler:()=>{t.value=!t.value}},{name:"提交预约",type:"primary",sort:40,handler:()=>{D(r=>k(s.value,t.value&&n.value?n.value:void 0,r.value).then(()=>{c.success("预约成功")}).then(()=>{l.value.submitHandler(),e.value&&e.value.submitHandler()}))}},{name:"提交",type:"primary",sort:40,handler:()=>{if(!s.value){c.warning("正文内容不能为空");return}return k(s.value,t.value&&n.value?n.value:void 0).then(()=>{c.success("发表成功")}).then(()=>{l.value.submitHandler(),e.value&&e.value.submitHandler()})}}]);return{addDarkMode:t,handlers:i,getPublicHandlers:m,whiteEditor:l,darkEditor:e,whiteEditorValue:s,darkEditorValue:n}}},B={class:"page"};function O(E,t,l,e,s,n){const m=v("PageHeader"),i=v("MDEditor");return _(),x("div",B,[V(m),V(i,{ref:"whiteEditor",modelValue:e.whiteEditorValue,"onUpdate:modelValue":t[0]||(t[0]=r=>e.whiteEditorValue=r),cache:"white-mode","show-default-handlers":["reset","clean"],"ex-handlers":[...e.getPublicHandlers("white"),...e.addDarkMode?[]:e.handlers]},null,8,["modelValue","ex-handlers"]),e.addDarkMode?(_(),g(i,{key:0,ref:"darkEditor",modelValue:e.darkEditorValue,"onUpdate:modelValue":t[1]||(t[1]=r=>e.darkEditorValue=r),cache:"dark-mode",title:"深色模式内容","show-default-handlers":["reset","clean"],"ex-handlers":[...e.getPublicHandlers("dark"),...e.addDarkMode?e.handlers:[]]},null,8,["modelValue","ex-handlers"])):y("",!0)])}const Q=w(A,[["render",O],["__scopeId","data-v-7f8150e5"]]);export{Q as default};
