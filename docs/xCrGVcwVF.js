const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./xBfOMfpdp.js","./assets/index-CbRGP7HB.js","./assets/index-LaXGcBtP.css","./xBNoCwISV.js","./xgsubhVdS.js","./xDSpHJm7g.js","./vander_commonjsHelpers-CqkleIqs.js","./xDTBo88P3.js","./xB7CNXVwB.js","./xBBWxOtju.js","./xBUvf_PM1.js","./xCfoaugNe.js","./vander_baseFindIndex-D7XfJLKM.js","./assets/PreviewScreenshots-B76jYR2H.css","./assets/el-scrollbar-BWxh-h6K.css","./assets/el-popper-DG5wR-qi.css","./xDNe6_MGu.js","./xB2TWhO_N.js","./assets/MarkDown-BhWfQBYh.css","./xCASJfn9A.js","./assets/ImageCon-lsCsi0ah.css","./xBrbQiOFu.js","./xyBNiriB9.js","./vander_baseIteratee-Docu_oz5.js","./xkA6PuxDR.js","./xDUE4GnIj.js","./xBedc7ndY.js","./assets/MDEditor-DJrw3LGy.css","./assets/el-tag-DljBBxJR.css","./assets/el-select-BaQA8IKP.css","./assets/el-date-picker-BUDvp0ks.css"])))=>i.map(i=>d[i]);
import{_,S as x,m as B,r as c,u as C,p as I,a as N,q as S,s as k,v as M,x as b,y as L,b as f,z as E,f as O,F as D,B as P,C as V,j as m,k as d,d as p,e as K,D as W,L as U}from"./assets/index-CbRGP7HB.js";import{P as j}from"./xCZ4diG6N.js";import{N as G}from"./xBoz8Ll3k.js";import{C as w,g as A}from"./xD2DEdFKL.js";import"./xB2TWhO_N.js";/* empty css         *//* empty css         */import"./xBedc7ndY.js";import"./xB7CNXVwB.js";const H={components:{ChaosItem:w,PageHeader:j,NextButton:G,SvgIcon:x,MDEditor:B({loader:()=>W(()=>import("./xBfOMfpdp.js").then(e=>e.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url),loadingComponent:U})},setup(){const e=c({}),{darkMode:s,isGreatOldOne:r}=C(),{offlineMode:t}=I(),i=c(""),o=N([]),h=c(!1),u=c(!1),y=c(null),g=l=>(u.value=!0,V(l).then(n=>{n=n.map(a=>(e.value[a.id]=a,{...a,expend:!1})),h.value=n.length===10,o.push(...n)}).finally(()=>{u.value=!1}));return g(),r.value&&S().then(l=>{l=l.sort((n,a)=>new Date(n.time).valueOf()-new Date(a.time).valueOf());for(const n of l)o.unshift(n)}),{loading:u,searchBlogEssays:g,essays:o,searchKeyWord:i,offlineMode:t,hasNext:h,darkMode:s,essayMap:e,setScorllGotoTop:k,isGreatOldOne:r,editing:y}},methods:{getEssayContent:A,search(e){if(this.essays.splice(0,this.essays.length),this.offlineMode&&e&&!/^#\d+$/.test(e)){this.$msgBox.error("离线模式下仅可以使用id搜索");return}return this.searchBlogEssays({keyword:e})},onNext(){var s;const e=(s=this.essays[this.essays.length-1])==null?void 0:s.id;return this.searchBlogEssays({keyword:this.searchKeyWord,start:e?e-1:void 0})},loadEssayById(e){if(this.essayMap[e]!==null)return this.essayMap[e]=null,M({id:e}).then(s=>{this.essayMap[e]=s}).catch(s=>{this.essayMap[e]=new Error(s)})},onSubmitUpdateEssay(e,s,r,t){if(e.id)return b(e.id,{content:s?void 0:r,hide:s?r||null:void 0}).then(i=>{Object.assign(e,i),this.editing=null});if(e.uuid)return L(e.uuid,{content:s?void 0:r,hide:s?r||null:void 0,time:t}).then(i=>{Object.assign(e,i),this.editing=null})}}},R={class:"page"};function T(e,s,r,t,i,o){const h=m("PageHeader"),u=m("ChaosItem"),y=m("MDEditor"),g=m("SvgIcon"),l=m("NextButton");return d(),f("div",R,[E(h,{modelValue:t.searchKeyWord,"onUpdate:modelValue":s[0]||(s[0]=n=>t.searchKeyWord=n),"show-search-input":!0,"on-input":o.search},null,8,["modelValue","on-input"]),O("ul",null,[(d(!0),f(D,null,P(t.essays,n=>(d(),f("li",{key:n.id,class:"essay-box"},[t.editing!==n?(d(),p(u,{key:0,essay:n,"essay-map":t.essayMap,onSetSearchKeyWord:s[1]||(s[1]=a=>{t.searchKeyWord=a,t.setScorllGotoTop()}),onLoadEssayById:o.loadEssayById},null,8,["essay","essay-map","onLoadEssayById"])):(d(),p(y,{key:1,"model-value":o.getEssayContent(n,!0),cache:!1,"ex-handlers":[{name:"取消",handler:()=>{t.editing=null}}],"on-submit":(a,v)=>o.onSubmitUpdateEssay(n,t.darkMode,a,v)},null,8,["model-value","ex-handlers","on-submit"])),t.isGreatOldOne&&t.editing!==n?(d(),p(g,{key:2,name:"bianji",onClick:a=>t.editing=n},null,8,["onClick"])):K("",!0)]))),128))]),E(l,{hasNext:t.hasNext,"onUpdate:hasNext":s[2]||(s[2]=n=>t.hasNext=n),loading:t.loading,"onUpdate:loading":s[3]||(s[3]=n=>t.loading=n),onLoadingClick:o.onNext},null,8,["hasNext","loading","onLoadingClick"])])}const ee=_(H,[["render",T],["__scopeId","data-v-404cc5a1"]]);export{ee as default};
