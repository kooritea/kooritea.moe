import{_ as b,L as j,gm as U,u as w,K as x,r as i,ab as S,gn as F,c as d,b as N,P,d as y,e as I,Q as R,n as B,T as V,g as p,m as z,f as A,a2 as J,a3 as K,h as M}from"./assets/index-97ffc094.js";const Q="/assets/404.png";const W={components:{LoadingIcon:j},directives:{imgFadeEnter:U},props:{loading:{type:Boolean,default:()=>!0},src:{type:String,default:()=>""},alt:{type:String,default:()=>""},source:{type:String,default:()=>"jsdelivr"},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(r,{emit:o,attrs:a}){const{jsdelivrBaseUrl:e}=w(),{computedLoading:l,computedSrc:u,computedLoadingDelay:c}=x(r,o),n=i(0),s=i(!1),g=i(!0),v=i(null),_=()=>{g.value=!0,v.value&&clearTimeout(v.value),v.value=setTimeout(()=>{g.value=!1},c.value)};_(),S(u,()=>{n.value=0,l.value=!0,_()});const m=i([]);F().then(t=>{s.value=!0;const D=e.value?[e.value]:[t];m.value=r.source==="static"?[]:D});const L=d(()=>r.src.startsWith("http")?[r.src]:m.value.length>0?m.value.map(t=>t+u.value):[u.value]),E=d(()=>L.value[n.value]),f=d(()=>n.value>=L.value.length),k=d(()=>f.value?"/assets/404.png":E.value);S(f,t=>{t&&(l.value=!1,typeof a.onError=="function"&&a.onError())});const h=t=>{l.value=!1,typeof a.onLoad=="function"&&a.onLoad(t)},T=t=>{n.value++},C=d(()=>l.value||g.value);return{computedLoadingDelay:c,jsdelivrBaseUrlListReady:s,isLoading:C,imageSrc:E,isError:f,onLoad:h,onError:T,applySrc:k}}},q=r=>(J("data-v-db163689"),r=r(),K(),r),G=["src","alt","title"],H=q(()=>M("img",{class:"img",src:Q},null,-1));function O(r,o,a,e,l,u){const c=N("LoadingIcon"),n=P("imgFadeEnter");return y(),I("div",{class:B(["image",{["loading-type-"+a.loadingType]:!0,error:e.isError,loading:e.isLoading}])},[!e.isError&&e.jsdelivrBaseUrlListReady?R((y(),I("img",{key:0,class:B(["img",{loading:e.isLoading}]),src:e.imageSrc,alt:a.alt,title:a.alt,onLoad:o[0]||(o[0]=(...s)=>e.onLoad&&e.onLoad(...s)),onError:o[1]||(o[1]=(...s)=>e.onError&&e.onError(...s)),onDragstart:o[2]||(o[2]=V(()=>{},["prevent"]))},null,42,G)),[[n,a.loadingType==="fade",e.computedLoadingDelay]]):p("",!0),e.isError?z(r.$slots,"error",{key:1},()=>[H],!0):p("",!0),e.isLoading&&a.loadingType==="icon"?(y(),A(c,{key:2})):p("",!0)],2)}const Y=b(W,[["render",O],["__scopeId","data-v-db163689"]]);export{Y as I};
