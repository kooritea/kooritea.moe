import{_ as B,a8 as C,a9 as L,r as M,N as E,k as s,d as m,w as d,b as p,B as F,z as r,e as k,l as b,F as O,j as n,A as I,L as P,a as v,aa as x,a0 as S,ab as R,f as j}from"./assets/index-B1eEDWgP.js";import{P as A}from"./xzA4eLLiI.js";import{M as G}from"./xDdD4P5DT.js";/* empty css         */import{E as N,a as q}from"./xBH0YcI5B.js";import{E as U,a as H,b as T,c as z}from"./xrhkzqHC7.js";/* empty css         *//* empty css         *//* empty css         */import"./xGAA7DgEq.js";import"./vander_baseClone-B_0GQd-0.js";import"./xkVIaUMRf.js";import"./vander_initCloneObject-CKO44sRw.js";import"./xDT7dKj2I.js";import"./xC-2gZRu2.js";import"./xBZMZRa4e.js";import"./vander_baseIteratee-76rZWvHh.js";import"./xBR0ha9ii.js";const K={components:{ElForm:N,ElFormItem:q,ElInput:C,ElRadioGroup:U,ElRadio:H,ButtonBox:L},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(a,{emit:e}){const i=M(null),{computedModelValue:o}=E(a,e);return{computedModelValue:o,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(u=>{i.value.validate((c,_)=>{c&&(typeof a.onSubmit=="function"?u(a.onSubmit(o.value)):u())})})}],form:i}}};function D(a,e,i,o,g,u){const c=n("el-input"),_=n("el-radio"),w=n("el-radio-group"),f=n("el-form-item"),V=n("ButtonBox"),y=n("el-form");return s(),m(y,{ref:"form",model:o.computedModelValue,"label-position":"top"},{default:d(()=>[(s(!0),p(O,null,F(i.fields,l=>(s(),p("div",{key:l.prop},[r(f,{label:l.label,prop:l.prop,required:l.required},{default:d(()=>[l.type==="input"?(s(),m(c,{key:0,modelValue:o.computedModelValue[l.prop],"onUpdate:modelValue":t=>o.computedModelValue[l.prop]=t},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),l.type==="boolean"?(s(),m(w,{key:1,modelValue:o.computedModelValue[l.prop],"onUpdate:modelValue":t=>o.computedModelValue[l.prop]=t},{default:d(()=>[r(_,{border:"",value:!0},{default:d(()=>e[0]||(e[0]=[b(" 是 ")])),_:1}),r(_,{border:"",value:!1},{default:d(()=>e[1]||(e[1]=[b(" 否 ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1032,["label","prop","required"])]))),128)),o.handlers.length>0?(s(),m(V,{key:0,handlers:o.handlers},null,8,["handlers"])):k("",!0)]),_:1},8,["model"])}const J=B(K,[["render",D]]),Q={components:{AsyncButtom:I,PageHeader:A,Markdown:G,GOOMabinogionFields:J,ElTable:T,ElTableColumn:z,LoadingIcon:P},setup(){const a=v([]),e=v([]),i=M(!0),o=()=>(i.value=!0,R().then(g=>{e.splice(0,e.length),e.push(...g);for(const u of e)u.fields.length<5&&a.push(u.uuid)}).finally(()=>{i.value=!1}));return o(),{loading:i,expandRowKeys:a,realtodos:e,load:o}},methods:{onSubmit(a,e){return x(a.row.uuid,{type:"resolve",data:e}).then(()=>(S.success("处理成功"),this.load()))},reject(a,e){return x(a.row.uuid,{type:"reject",reason:e.inputValue}).then(()=>this.load())}}},W={class:"page"},X={key:1},Y={class:"preview"},Z={key:0,class:"desp"},$={key:1,class:"quick-boolean"};function ee(a,e,i,o,g,u){const c=n("PageHeader"),_=n("LoadingIcon"),w=n("Markdown"),f=n("AsyncButtom"),V=n("GOOMabinogionFields"),y=n("el-table-column"),l=n("el-table");return s(),p("div",W,[r(c),r(l,{border:"",data:o.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":o.expandRowKeys},{empty:d(()=>[o.loading?(s(),m(_,{key:0})):(s(),p("span",X," 暂无数据 "))]),default:d(()=>[r(y,{type:"expand"},{default:d(t=>[j("div",Y,[t.row.desp?(s(),p("div",Z,[r(w,{"model-value":t.row.desp},null,8,["model-value"])])):k("",!0),t.row.fields.length===1&&t.row.fields[0].type==="boolean"?(s(),p("div",$,[r(f,{type:"primary",onLoadingClick:()=>u.onSubmit(t,{[t.row.fields[0].prop]:!0})},{default:d(()=>e[0]||(e[0]=[b(" 是 ")])),_:2},1032,["onLoadingClick"]),r(f,{type:"default",onLoadingClick:()=>u.onSubmit(t,{[t.row.fields[0].prop]:!1})},{default:d(()=>e[1]||(e[1]=[b(" 否 ")])),_:2},1032,["onLoadingClick"])])):(s(),m(V,{key:2,fields:t.row.fields,"on-submit":h=>u.onSubmit(t,h)},null,8,["fields","on-submit"]))])]),_:1}),r(y,{prop:"name",label:"描述"}),r(y,{label:"操作",width:"120px"},{default:d(t=>[r(f,{type:"danger",size:"mini",onLoadingClick:h=>u.reject(t,h),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:d(()=>e[2]||(e[2]=[b(" 拒绝 ")])),_:2},1032,["onLoadingClick"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const ke=B(Q,[["render",ee],["__scopeId","data-v-2b1c8f98"]]);export{ke as default};
