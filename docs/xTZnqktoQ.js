import{_ as B,a9 as C,aa as L,r as M,O as E,k as u,d as m,w as s,b as p,B as O,z as d,e as k,l as b,F,j as l,A as I,L as P,a as h,ab as x,a1 as S,ac as R,f as j}from"./assets/index-CvIYzVtv.js";import{P as A}from"./xDxly3N35.js";import{M as G}from"./xDE6Pu_SN.js";/* empty css         */import{E as q,a as N}from"./xBzFHYyk0.js";import{E as U,a as H,b as T,c as z}from"./xB9ZF_TG3.js";/* empty css         *//* empty css         *//* empty css         */import"./xBNjPam3n.js";import"./vander_baseClone-L8_yqpeE.js";import"./xML8-_cHX.js";import"./vander_initCloneObject-BEX6q2rI.js";import"./x-kMLwP9Y.js";import"./x-w8SDWlO.js";import"./xleeUjxMt.js";import"./vander_baseIteratee-Dd9zUSwt.js";import"./xAK0-ZOqg.js";const K={components:{ElForm:q,ElFormItem:N,ElInput:C,ElRadioGroup:U,ElRadio:H,ButtonBox:L},props:{modelValue:{type:Object,default:()=>({})},fields:{type:Array,default:()=>[]},onSubmit:{type:Function,default:void 0}},emits:["update:modelValue"],setup(a,{emit:e}){const i=M(null),{computedModelValue:o}=E(a,e);for(const n of a.fields)n.value&&(o.value[n.prop]=n.value);return{computedModelValue:o,handlers:[{name:"提交",type:"primary",handler:()=>new Promise(n=>{i.value.validate((c,_)=>{c&&(typeof a.onSubmit=="function"?n(a.onSubmit(o.value)):n())})})}],form:i}}};function D(a,e,i,o,g,n){const c=l("el-input"),_=l("el-radio"),w=l("el-radio-group"),f=l("el-form-item"),v=l("ButtonBox"),y=l("el-form");return u(),m(y,{ref:"form",model:o.computedModelValue,"label-position":"top"},{default:s(()=>[(u(!0),p(F,null,O(i.fields,r=>(u(),p("div",{key:r.prop},[d(f,{label:r.label,prop:r.prop,required:r.required},{default:s(()=>[r.type==="input"?(u(),m(c,{key:0,modelValue:o.computedModelValue[r.prop],"onUpdate:modelValue":t=>o.computedModelValue[r.prop]=t},null,8,["modelValue","onUpdate:modelValue"])):k("",!0),r.type==="boolean"?(u(),m(w,{key:1,modelValue:o.computedModelValue[r.prop],"onUpdate:modelValue":t=>o.computedModelValue[r.prop]=t},{default:s(()=>[d(_,{border:"",value:!0},{default:s(()=>e[0]||(e[0]=[b(" 是 ")])),_:1}),d(_,{border:"",value:!1},{default:s(()=>e[1]||(e[1]=[b(" 否 ")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])):k("",!0)]),_:2},1032,["label","prop","required"])]))),128)),o.handlers.length>0?(u(),m(v,{key:0,handlers:o.handlers},null,8,["handlers"])):k("",!0)]),_:1},8,["model"])}const J=B(K,[["render",D]]),Q={components:{AsyncButtom:I,PageHeader:A,Markdown:G,GOOMabinogionFields:J,ElTable:T,ElTableColumn:z,LoadingIcon:P},setup(){const a=h([]),e=h([]),i=M(!0),o=()=>(i.value=!0,R().then(g=>{e.splice(0,e.length),e.push(...g);for(const n of e)n.fields.length<5&&a.push(n.uuid)}).finally(()=>{i.value=!1}));return o(),{loading:i,expandRowKeys:a,realtodos:e,load:o}},methods:{onSubmit(a,e){return x(a.row.uuid,{type:"resolve",data:e}).then(()=>(S.success("处理成功"),this.load()))},reject(a,e){return x(a.row.uuid,{type:"reject",reason:e}).then(()=>this.load())}}},W={class:"page"},X={key:1},Y={class:"preview"},Z={key:0,class:"desp"},$={key:1,class:"quick-boolean"};function ee(a,e,i,o,g,n){const c=l("PageHeader"),_=l("LoadingIcon"),w=l("Markdown"),f=l("AsyncButtom"),v=l("GOOMabinogionFields"),y=l("el-table-column"),r=l("el-table");return u(),p("div",W,[d(c),d(r,{border:"",data:o.realtodos,style:{width:"100%"},"row-key":"uuid","expand-row-keys":o.expandRowKeys},{empty:s(()=>[o.loading?(u(),m(_,{key:0})):(u(),p("span",X," 暂无数据 "))]),default:s(()=>[d(y,{type:"expand"},{default:s(t=>[j("div",Y,[t.row.desp?(u(),p("div",Z,[d(w,{"model-value":t.row.desp},null,8,["model-value"])])):k("",!0),t.row.fields.length===1&&t.row.fields[0].type==="boolean"?(u(),p("div",$,[d(f,{type:"primary",onLoadingClick:()=>n.onSubmit(t,{[t.row.fields[0].prop]:!0})},{default:s(()=>e[0]||(e[0]=[b(" 是 ")])),_:2},1032,["onLoadingClick"]),d(f,{type:"default",onLoadingClick:()=>n.onSubmit(t,{[t.row.fields[0].prop]:!1})},{default:s(()=>e[1]||(e[1]=[b(" 否 ")])),_:2},1032,["onLoadingClick"])])):(u(),m(v,{key:2,fields:t.row.fields,"on-submit":V=>n.onSubmit(t,V)},null,8,["fields","on-submit"]))])]),_:1}),d(y,{prop:"name",label:"描述"}),d(y,{label:"操作",width:"120px"},{default:s(t=>[d(f,{type:"danger",size:"mini",onLoadingClick:({instance:V})=>n.reject(t,V.inputValue),confirm:{showInput:!0,message:"请输入拒绝原因"}},{default:s(()=>e[2]||(e[2]=[b(" 拒绝 ")])),_:2},1032,["onLoadingClick"])]),_:1})]),_:1},8,["data","expand-row-keys"])])}const ke=B(Q,[["render",ee],["__scopeId","data-v-8fdf7e8a"]]);export{ke as default};
