import{P as d}from"./xD2gRd_Ms.js";import{_ as u,u as b,aX as c,a7 as m,aY as f,M as h,aZ as P,b as _,z as o,j as n,k as g}from"./assets/index-Ba7ZBZX4.js";const w={components:{PageHeader:d},setup(){const{mobileMode:e}=b();return{mobileMode:e}},data(){return{tableData:[],tableProp:{tableConfig:{handlerWidth:"310px",tableProps:{stripe:!0,border:!0},tableHandlerProps:{fixed:void 0},publicTableProps:{showOverflowTooltip:!0},tableSelectionProps:{selectable:e=>!!e.filepath}},emitLoadOnCreate:!0,buttons:[{type:(e,r)=>r.row.running?"primary":"default",label:(e,r)=>r.row.running?"已开启":"已关闭",handler:(e,r)=>c(r.row.key,{running:!r.row.running}).then(()=>{this.$refs.EditTable.search()})},{type:"primary",buttonProps:{link:!0},label:"立即执行",handler:(e,r)=>{m({title:"提示",message:`确认立即执行${r.row.desp||r.row.jobName}`,type:"warning",confirmHandlerPromise:a=>f(r.row.key).then(()=>{this.$refs.EditTable.search()})})}}]},fields:[{type:"input",label:"执行时间",prop:"cronTime",tableProps:{minWidth:120}},{type:"input",label:"任务名",prop:"desp",tableProps:{minWidth:140,formatter:e=>e.desp||e.jobName}},{type:"select",label:"运行环境",prop:"env",options:[{label:"全部",value:"ALL"},{label:"开发环境",value:"DEV"},{label:"生产环境",value:"PROD"}],tableProps:{minWidth:120}},{type:"input",label:"下次运行时间",prop:"nextDates",tableProps:{width:180,formatter:(e,r,a)=>h(a)}}]}},methods:{onLoad(){return P().then(e=>({tableData:e,total:e.length}))}}},y={class:"page"};function v(e,r,a,D,t,l){const s=n("PageHeader"),p=n("edit-table");return g(),_("div",y,[o(s),o(p,{ref:"EditTable",modelValue:t.tableData,"onUpdate:modelValue":r[0]||(r[0]=i=>t.tableData=i),fields:t.fields,"table-prop":t.tableProp,"form-prop":e.formProp,"search-loader":l.onLoad},null,8,["modelValue","fields","table-prop","form-prop","search-loader"])])}const L=u(w,[["render",v],["__scopeId","data-v-c0c406c4"]]);export{L as default};
