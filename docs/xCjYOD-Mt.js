const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./xCsvD5wMp.js","./assets/index-Ba7ZBZX4.js","./assets/index-LaXGcBtP.css","./xB0vfRdBM.js","./xDZ9bOQHy.js","./xDSpHJm7g.js","./vander_commonjsHelpers-CqkleIqs.js","./xB-fkBhDl.js","./xB9g1xWmM.js","./xCcOKAQT9.js","./xBtmTXNGv.js","./x5NQ8FxbY.js","./vander_baseFindIndex-D7XfJLKM.js","./assets/PreviewScreenshots-B76jYR2H.css","./assets/el-scrollbar-BWxh-h6K.css","./assets/el-popper-DG5wR-qi.css","./xBptGq4VE.js","./xlSY3jxve.js","./assets/MarkDown-BhWfQBYh.css","./xCSKn9caX.js","./assets/ImageCon-lsCsi0ah.css","./xBUUsLmBu.js","./xCtLMPMgT.js","./vander_baseIteratee-Pxj3jocW.js","./xS71nl63k.js","./xCLtRgxxL.js","./xCtWNKvGH.js","./assets/MDEditor-DJrw3LGy.css","./assets/el-tag-DljBBxJR.css","./assets/el-select-BaQA8IKP.css","./assets/el-date-picker-BUDvp0ks.css"])))=>i.map(i=>d[i]);
import{_ as b,S as E,m as T,u as D,p as P,r as p,a as B,E as V,s as G,G as L,b as g,z as f,w,f as c,F as I,B as M,H as O,j as l,k as r,l as S,t as k,d as N,e as K,I as W,D as U,L as j}from"./assets/index-Ba7ZBZX4.js";import{P as H}from"./xD2gRd_Ms.js";import{N as A}from"./xCUOso9r_.js";import{C as F}from"./xBlaZzKyJ.js";/* empty css         *//* empty css         */import{E as Q}from"./xCtWNKvGH.js";import"./xlSY3jxve.js";import"./xB9g1xWmM.js";const X={components:{ElPopover:Q,ChaosItem:F,PageHeader:H,NextButton:A,SvgIcon:E,MDEditor:T({loader:()=>U(()=>import("./xCsvD5wMp.js").then(n=>n.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url),loadingComponent:j})},setup(){const{darkMode:n,isGreatOldOne:o}=D(),{offlineMode:m}=P(),e=p(""),x=B([]),i=B({}),a=p("all"),y=p(!1),h=p(!1),v=p(null),_=u=>(h.value=!0,O(u).then(d=>{d=d.map(t=>({...t,id:`${t.author}-${t.id}`,mid:t.id,time:t.date,expend:!1,link:{leoon:"https://www.leoon.cn/moment",gofixpro:"https://blog.gofixpro.fun/",dnick:"https://dnick.cn/",GrayfenXie:"https://www.grayfen.cn/",baymax:"https://ys.xjinfeng.top/essays",yuanmoc:"https://www.yuanmoc.cn/daily/"}[t.author]})),y.value=d.length===10,x.push(...d)}).finally(()=>{h.value=!1}));return _(),V(a,()=>{i[a.value]||W(a.value).then(u=>{i[a.value]=u})},{immediate:!0}),{loading:h,searchBlogmoments:_,moments:x,statistics:i,statisticsType:a,searchKeyWord:e,offlineMode:m,hasNext:y,darkMode:n,setScorllGotoTop:G,isGreatOldOne:o,editing:v}},methods:{search(n){if(this.moments.splice(0,this.moments.length),this.offlineMode&&n&&!/^#\d+$/.test(n)){this.$msgBox.error("离线模式下仅可以使用id搜索");return}return this.searchBlogmoments({keyword:n})},onNext(){var o;const n=(o=this.moments[this.moments.length-1])==null?void 0:o.mid;return this.searchBlogmoments({keyword:this.searchKeyWord,start:n?n-1:void 0})},onSubmitUpdatemoment(n,o,m){if(n.mid)return L(n.mid,{content:o?void 0:m,hide:o?m||null:void 0}).then(e=>{Object.assign(n,e),this.editing=null})}}},z={class:"page"},R={class:"title"},q={class:"rank-box"},J={class:"author"},Y={class:"count"};function Z(n,o,m,e,x,i){const a=l("svg-icon"),y=l("el-popover"),h=l("PageHeader"),v=l("ChaosItem"),_=l("MDEditor"),u=l("SvgIcon"),d=l("NextButton");return r(),g("div",z,[f(h,{modelValue:e.searchKeyWord,"onUpdate:modelValue":o[1]||(o[1]=t=>e.searchKeyWord=t),"show-search-input":!0,"on-input":i.search},{title:w(({title:t})=>[c("div",R,[S(k(t)+" ",1),f(y,{width:"",trigger:"click","popper-class":"popper-essay",effect:e.darkMode?"dark":"light"},{reference:w(()=>[f(a,{name:"rank"})]),default:w(()=>[c("div",q,[c("div",{class:"name",onClick:o[0]||(o[0]=()=>{const s=["all","year","month","week","today"],C=s.indexOf(e.statisticsType);e.statisticsType=s[C===s.length-1?0:C+1]})},[S(k({all:"历史总榜",year:"年榜",month:"月榜",week:"周榜",today:"日榜"}[e.statisticsType])+" ",1),f(a,{name:"switch"})]),(r(!0),g(I,null,M(e.statistics[e.statisticsType]||[],s=>(r(),g("div",{key:s.author,class:"rank"},[c("span",J,k(s.author),1),c("span",Y,k(s.count),1)]))),128))])]),_:1},8,["effect"])])]),_:1},8,["modelValue","on-input"]),c("ul",null,[(r(!0),g(I,null,M(e.moments,t=>(r(),g("li",{key:t.mid,class:"moment-box"},[e.editing!==t?(r(),N(v,{key:0,essay:t,isMarkDowm:["leoon","dnick","GrayfenXie","gofixpro"].includes(t.author),safeMode:!0,hasComment:!0,commentQuery:s=>({momentId:s.mid}),onSetSearchKeyWord:o[2]||(o[2]=s=>{e.searchKeyWord=s,e.setScorllGotoTop()})},null,8,["essay","isMarkDowm","commentQuery"])):(r(),N(_,{key:1,"model-value":t.content,cache:!1,"ex-handlers":[{name:"取消",handler:()=>{e.editing=null}}],"on-submit":s=>i.onSubmitUpdatemoment(t,e.darkMode,s)},null,8,["model-value","ex-handlers","on-submit"])),e.isGreatOldOne&&e.editing!==t?(r(),N(u,{key:2,name:"bianji",onClick:s=>e.editing=t},null,8,["onClick"])):K("",!0)]))),128))]),f(d,{hasNext:e.hasNext,"onUpdate:hasNext":o[3]||(o[3]=t=>e.hasNext=t),loading:e.loading,"onUpdate:loading":o[4]||(o[4]=t=>e.loading=t),onLoadingClick:i.onNext},null,8,["hasNext","loading","onLoadingClick"])])}const le=b(X,[["render",Z],["__scopeId","data-v-4365a429"]]);export{le as default};
