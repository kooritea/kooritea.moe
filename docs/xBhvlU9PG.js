import{P as B}from"./xDS28Wkny.js";import{N as x}from"./xCb41Trzt.js";import{_ as k,a1 as C,A as N,r as h,a as M,b as _,z as d,f as s,F as V,B as I,d as W,e as w,U as A,aj as P,j as i,k as u,t as c,w as K,l as L,ak as U,al as Y}from"./assets/index-CN9qsFRs.js";/* empty css         *//* empty css         *//* empty css         */import{I as D}from"./xVJ-P9u6J.js";import{E as T}from"./xyoTTjjyS.js";import"./xDSpHJm7g.js";import"./vander_commonjsHelpers-CqkleIqs.js";import"./xDDa5eWUt.js";import"./xCywoOxrd.js";import"./xBwWK_d9s.js";import"./xDJdFdLlH.js";import"./xBa92y_gL.js";const j={components:{ImageCon:D,NextButton:x,PageHeader:B,TextInput:C,ElDatePicker:T,AsyncButtom:N},setup(){const l=h(""),n=h(""),a=M([]),t=h(!0),r=h(!1),p=()=>{if(n.value)return r.value=!0,U(n.value,a.length?a.length+1:0).then(o=>{a.push(...o),t.value=o.length===24}).finally(()=>{r.value=!1})},m=()=>{if(l.value)return r.value=!0,Y(l.value,a.length/24+1).then(o=>{a.push(...o),t.value=o.length===24}).finally(()=>{r.value=!1})};return{yearMonth:l,keyWord:n,onKeyWordChange:o=>{l.value="",a.splice(0,a.length),t.value=!0,p()},onMonthChange:o=>{n.value="",t.value=!0,a.splice(0,a.length),m()},listData:a,hasNext:t,switchBangumiAdded:o=>o.id?A(o.id).then(()=>{o.id=null}):(delete o.id,P(o).then(e=>{o.id=e.id})),loading:r,onNext:()=>{if(n.value)return p();if(l.value)return m()}}}},E={class:"page"},H={class:"search-box"},F={class:"bangumi-list"},O={class:"left"},R={class:"info"},z={class:"name"},G={class:"nname"},S={class:"episode-time"},q={class:"right"};function J(l,n,a,t,r,p){const m=i("PageHeader"),v=i("el-date-picker"),g=i("TextInput"),f=i("ImageCon"),y=i("AsyncButtom"),o=i("NextButton");return u(),_("div",E,[d(m),s("div",H,[d(v,{modelValue:t.yearMonth,"onUpdate:modelValue":n[0]||(n[0]=e=>t.yearMonth=e),type:"month",placeholder:"按月份搜索","value-format":"YYYY-M",onChange:t.onMonthChange},null,8,["modelValue","onChange"]),d(g,{modelValue:t.keyWord,"onUpdate:modelValue":n[1]||(n[1]=e=>t.keyWord=e),"on-input":t.onKeyWordChange},null,8,["modelValue","on-input"])]),s("div",F,[(u(!0),_(V,null,I(t.listData,e=>(u(),_("div",{key:e.subject,class:"bangumi"},[s("div",O,[d(f,{src:`https:${e.img}`,prefix:[""],onClick:Q=>l.$imagePreview(`https:${e.img.replace(/r\/400\//,"")}`,{fileName:e.name||e.nname})},null,8,["src","onClick"]),s("div",R,[s("div",z,c(e.name),1),s("div",G,c(e.nname),1),s("div",S,c(e.episode?`${e.episode}集`:"")+" "+c(e.time),1)])]),s("div",q,[d(y,{type:e.id?"primary":"default",onLoadingClick:()=>t.switchBangumiAdded(e)},{default:K(()=>[L(c(e.id?"已添加":"添加"),1)]),_:2},1032,["type","onLoadingClick"])])]))),128))]),t.keyWord||t.yearMonth?(u(),W(o,{key:0,hasNext:t.hasNext,"onUpdate:hasNext":n[2]||(n[2]=e=>t.hasNext=e),loading:t.loading,"onUpdate:loading":n[3]||(n[3]=e=>t.loading=e),onLoadingClick:t.onNext},null,8,["hasNext","loading","onLoadingClick"])):w("",!0)])}const me=k(j,[["render",J],["__scopeId","data-v-07a4f88f"]]);export{me as default};
