import{_ as h,u as b,a3 as n,aH as m,aI as f,av as P,aw as w,aJ as y,b as _,p as s,j as l,k as g}from"./assets/index-BD-ioEqJ.js";import{P as v}from"./xksaL_xA9.js";import{G as O}from"./xMvqX9DJc.js";const x={components:{PageHeader:v,GOORyonaVideoPreviewDialog:O},setup(){const{mobileMode:e}=b();return{mobileMode:e}},data(){return{isExSearch:!1,tableData:[],tableProp:{tableConfig:{handlerWidth:"210px",showPagination:!0,tableProps:{stripe:!0,border:!0},tableHandlerProps:{fixed:void 0},publicTableProps:{showOverflowTooltip:!0},tableSelectionProps:{selectable:e=>!!e.filepath}},emitLoadOnCreate:!0,buttons:[{type:"primary",buttonProps:{link:!0},show:(e,r)=>!r.row.remote,label:"发布",handler:(e,r)=>{n({title:"提示",message:`确认发布${r.row.filepath}`,type:"warning",confirmHandlerPromise:t=>m(r.row.id).then(()=>{this.$refs.EditTable.search()})})}},{type:"primary",buttonProps:{link:!0},label:"查看",handler:(e,r)=>{this.$refs.GOORyonaVideoPreviewDialog.open({sourceSrc:`/video/source/collection/preview/${r.row.id}`})}},{type:"primary",buttonProps:{link:!0},label:"编辑",handler:(e,r)=>{this.$refs.EditTable.editReady(r.row)}},{type:"danger",buttonProps:{link:!0},label:"删除",handler:(e,r)=>{n({title:"提示",message:`确认删除${r.row.filepath}`,type:"warning",confirmHandlerPromise:t=>f(r.row.id).then(()=>{this.$refs.EditTable.search()})})}}]},searchFormProp:{formConfig:{labelWidth:"100px",labelPosition:"right",gutter:32}},fields:[{type:"select",label:"ID",prop:"id",span:this.mobileMode?24:12,tableProps:{width:60},showInForm:!1},{type:"input",prop:"title",label:"标题",showInForm:!1},{type:"buttons",showInTable:!1,showInForm:e=>e.meta.isSearchForm===!0,hiddenLabel:!0,label:"搜索操作",prop:"搜索操作",span:6,formItemProp:{labelWidth:"0px"},buttons:[{label:e=>this.isExSearch?"收起":"展开",leftIcon:e=>this.isExSearch?P:w,type:"primary",buttonProps:{link:!0},handler:e=>{this.isExSearch=!this.isExSearch}},{label:"查询",type:"primary",handler:e=>{const{meta:r}=e,{_editTable:t}=r,{editTableInstance:a}=t;a.search()}},{label:"重置",type:"primary",buttonProps:{plain:!0},handler:e=>{const{meta:r}=e,{_editTable:t}=r,{editTableInstance:a}=t;a.search({reset:!0})}}]}]}},methods:{onLoad(e,r){return y({size:e.size,page:e.current}).then(t=>({tableData:t.records,total:t.total}))}}},I={class:"page"};function D(e,r,t,a,o,i){const p=l("PageHeader"),d=l("edit-table"),c=l("GOORyonaVideoPreviewDialog");return g(),_("div",I,[s(p),s(d,{ref:"EditTable",modelValue:o.tableData,"onUpdate:modelValue":r[0]||(r[0]=u=>o.tableData=u),"show-search-form":!0,fields:o.fields,"table-prop":o.tableProp,"search-form-prop":o.searchFormProp,"search-loader":i.onLoad},null,8,["modelValue","fields","table-prop","search-form-prop","search-loader"]),s(c,{ref:"GOORyonaVideoPreviewDialog"},null,512)])}const k=h(x,[["render",D],["__scopeId","data-v-3bf91772"]]);export{k as default};
