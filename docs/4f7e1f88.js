import{_ as C,L as D,gj as b,u as w,K as x,r as v,ab as h,a as F,c as i,b as N,P,d as m,e as E,Q as U,n as S,T as V,g as f,m as z,f as A,a2 as K,a3 as M,h as Q}from"./assets/index-f6740f98.js";const W="/assets/404.png";const q={components:{LoadingIcon:D},directives:{imgFadeEnter:b},props:{loading:{type:Boolean,default:()=>!0},src:{type:String,default:()=>""},alt:{type:String,default:()=>""},source:{type:String,default:()=>"jsdelivr"},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0}},setup(t,{emit:o,attrs:r}){const{jsdelivrBaseUrl:e}=w(),{computedLoading:l,computedSrc:c,computedLoadingDelay:d}=x(t,o),n=v(0),a=v(!0),u=v(null),p=()=>{a.value=!0,u.value&&clearTimeout(u.value),u.value=setTimeout(()=>{a.value=!1},d.value)};p(),h(c,()=>{n.value=0,l.value=!0,p()});const I=e.value?[e.value]:"https://gcore.jsdelivr.net/gh,https://testingcf.jsdelivr.net/gh,https://cdn.jsdelivr.net/gh,https://fastly.jsdelivr.net/gh".split(","),y=F(t.source==="static"?[]:I),_=i(()=>t.src.startsWith("http")?[t.src]:y.length>0?y.map(s=>s+c.value):[c.value]),L=i(()=>_.value[n.value]),g=i(()=>n.value>=_.value.length),k=i(()=>g.value?"/assets/404.png":L.value);h(g,s=>{s&&(l.value=!1,typeof r.onError=="function"&&r.onError())});const j=s=>{l.value=!1,typeof r.onLoad=="function"&&r.onLoad(s)},T=s=>{n.value++},B=i(()=>l.value||a.value);return{computedLoadingDelay:d,isLoading:B,imageSrc:L,isError:g,onLoad:j,onError:T,applySrc:k}}},G=t=>(K("data-v-99b05828"),t=t(),M(),t),H=["src","alt","title"],J=G(()=>Q("img",{class:"img",src:W},null,-1));function O(t,o,r,e,l,c){const d=N("LoadingIcon"),n=P("imgFadeEnter");return m(),E("div",{class:S(["image",{["loading-type-"+r.loadingType]:!0,error:e.isError,loading:e.isLoading}])},[e.isError?f("",!0):U((m(),E("img",{key:0,class:S(["img",{loading:e.isLoading}]),src:e.imageSrc,alt:r.alt,title:r.alt,onLoad:o[0]||(o[0]=(...a)=>e.onLoad&&e.onLoad(...a)),onError:o[1]||(o[1]=(...a)=>e.onError&&e.onError(...a)),onDragstart:o[2]||(o[2]=V(()=>{},["prevent"]))},null,42,H)),[[n,r.loadingType==="fade",e.computedLoadingDelay]]),e.isError?z(t.$slots,"error",{key:1},()=>[J],!0):f("",!0),e.isLoading&&r.loadingType==="icon"?(m(),A(d,{key:2})):f("",!0)],2)}const X=C(q,[["render",O],["__scopeId","data-v-99b05828"]]);export{X as I};
