import{P as d}from"./xCGzxTDAw.js";import{_ as u,u as b,aY as c,a8 as m,aZ as f,N as h,a_ as P,b as _,z as o,j as n,k as g}from"./assets/index-bTCCQilh.js";const w={components:{PageHeader:d},setup(){const{mobileMode:e}=b();return{mobileMode:e}},data(){return{tableData:[],tableProp:{tableConfig:{handlerWidth:"310px",tableProps:{stripe:!0,border:!0},tableHandlerProps:{fixed:void 0},publicTableProps:{showOverflowTooltip:!0},tableSelectionProps:{selectable:e=>!!e.filepath}},emitLoadOnCreate:!0,buttons:[{type:(e,t)=>t.row.running?"primary":"default",label:(e,t)=>t.row.running?"已开启":"已关闭",handler:(e,t)=>c(t.row.key,{running:!t.row.running}).then(()=>{this.$refs.EditTable.search()})},{type:"primary",buttonProps:{link:!0},label:"立即执行",handler:(e,t)=>{m({title:"提示",message:`确认立即执行${t.row.desp||t.row.jobName}`,type:"warning",closeOnLoading:!0,confirmHandlerPromise:a=>f(t.row.key).then(()=>{this.$refs.EditTable.search()})})}}]},fields:[{type:"input",label:"执行时间",prop:"cronTime",tableProps:{minWidth:120}},{type:"input",label:"任务名",prop:"desp",tableProps:{minWidth:140,formatter:e=>e.desp||e.jobName}},{type:"select",label:"运行环境",prop:"env",options:[{label:"全部",value:"ALL"},{label:"开发环境",value:"DEV"},{label:"生产环境",value:"PROD"}],tableProps:{minWidth:120}},{type:"input",label:"下次运行时间",prop:"nextDates",tableProps:{width:180,formatter:(e,t,a)=>h(a)}}]}},methods:{onLoad(){return P().then(e=>({tableData:e,total:e.length}))}}},y={class:"page"};function v(e,t,a,D,r,l){const s=n("PageHeader"),p=n("edit-table");return g(),_("div",y,[o(s),o(p,{ref:"EditTable",modelValue:r.tableData,"onUpdate:modelValue":t[0]||(t[0]=i=>r.tableData=i),fields:r.fields,"table-prop":r.tableProp,"search-loader":l.onLoad},null,8,["modelValue","fields","table-prop","search-loader"])])}const k=u(w,[["render",v],["__scopeId","data-v-7e117398"]]);export{k as default};
