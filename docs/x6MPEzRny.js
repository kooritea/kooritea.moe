import{_,j as d,k as a,b as m,f as F,l as V,t as b,e as h,p as y,w as f,d as k,T as g,F as w,E as C,n as P,aV as O,aW as U}from"./assets/index-BtZJFWXm.js";import{d as E}from"./xDSpHJm7g.js";import{M as x}from"./xLNDlanat.js";import"./vander_commonjsHelpers-CqkleIqs.js";import"./xBlTZeQki.js";/* empty css         *//* empty css         */import"./xD26Af517.js";import"./xD4-UIyE-.js";import"./xDG_k2Tfu.js";import"./xC8Q2h3sr.js";import"./xB8onCzLX.js";import"./xDigGAP_c.js";import"./vander_baseFindIndex-D7XfJLKM.js";import"./xDxr9PeNl.js";import"./xNxZzexdP.js";import"./xBu7t7ys6.js";/* empty css         */import"./xcqbKMEAR.js";import"./xX-mkVmDo.js";import"./xBCXhpBZR.js";const B={props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:()=>""},easyFormItemScope:{type:[Object],default:()=>({})}},emits:["update:modelValue"],data(){return{showPicker:!1,isCheckAll:!1,isIndeterminate:!1,searchKeyWord:"",createdOption:[]}},computed:{columns(){return[this.easyFormItemScope.getPropValue(this.easyFormItemScope.field.required)?"":{text:"未选择",value:void 0,isClear:!0},...this.options2columns(this.checkOptions)].filter(o=>!!o)},checkOptions(){let o=this.easyFormItemScope.options;return this.easyFormItemScope.getFormProps("allowCreate")&&(o=[...this.createdOption,...o]),this.easyFormItemScope.getFormProps("remote")?o:this.easyFormItemScope.getFormProps("filterable")?o.filter(e=>!this.searchKeyWord||e.label.includes(this.searchKeyWord)||e.value.includes(this.searchKeyWord)):o},showCheckAll(){return this.checkOptions.length<5?!1:this.easyFormItemScope.field.checkAllMethod!==!1}},methods:{checkAll(){this.easyFormItemScope.field.checkAllMethod?this.easyFormItemScope.field.checkAllMethod(this.easyFormItemScope,this.checkOptions):this.$refs.checkAllCheckbox.toggle()},options2columns(o){return o.filter(e=>e.show!==!1).map(e=>{const t={...e,text:e.label};return Array.isArray(t.children)&&(t.children=this.options2columns(t.children)),t})},onPickConfirm({selectedOptions:o}){this.showPicker=!1,this.$emit("update:modelValue",o[0].value)},createOption(){this.createdOption.push({label:this.searchKeyWord,value:this.searchKeyWord,isCreate:!0}),this.searchKeyWord=""}}},W={key:0,class:"placeholder"},K={key:1,class:"popup-handler"},R={key:0,class:"picker-head"},N={class:"title"},T={key:2},z={key:4,class:"create-box"};function q(o,e,t,u,l,n){const p=d("van-search"),s=d("van-checkbox"),i=d("van-cell"),I=d("van-cell-group"),L=d("van-checkbox-group"),M=d("van-picker"),j=d("van-button"),D=d("van-popup");return a(),m("div",{class:P(["vant-select",{"is-disabled":t.easyFormItemScope.disabled}])},[F("div",{class:"select-inner",onClick:e[0]||(e[0]=()=>{t.easyFormItemScope.disabled||(l.showPicker=!0)})},[V(b(t.easyFormItemScope.viewValue)+" ",1),(t.easyFormItemScope.isMultipleValue?t.modelValue.length===0:!t.modelValue)?(a(),m("div",W,b(t.easyFormItemScope.placeholder),1)):h("",!0),t.easyFormItemScope.disabled?h("",!0):(a(),m("div",K," 选择 "))]),y(D,{show:l.showPicker,"onUpdate:show":e[13]||(e[13]=r=>l.showPicker=r),position:"bottom"},{default:f(()=>[t.easyFormItemScope.isMultipleValue?(a(),m("div",R,[F("span",N,b(t.easyFormItemScope.placeholder),1),F("span",{class:"confirm",onClick:e[1]||(e[1]=()=>{l.showPicker=!1})},"确认")])):h("",!0),t.easyFormItemScope.getFormProps("filterable")?(a(),k(p,{key:1,modelValue:l.searchKeyWord,"onUpdate:modelValue":[e[2]||(e[2]=r=>l.searchKeyWord=r),e[3]||(e[3]=r=>{var c;(c=t.easyFormItemScope.getFormProps("remoteMethod"))==null||c(r)})],shape:"round",placeholder:"请输入搜索关键词"},null,8,["modelValue"])):h("",!0),t.easyFormItemScope.isMultipleValue?(a(),m("div",T,[n.showCheckAll?(a(),k(i,{key:0,clickable:"",title:"全选",onClick:e[7]||(e[7]=()=>{n.checkAll()})},{"right-icon":f(()=>[y(s,{ref:"checkAllCheckbox",modelValue:l.isCheckAll,"onUpdate:modelValue":e[4]||(e[4]=r=>l.isCheckAll=r),indeterminate:l.isIndeterminate,onClick:e[5]||(e[5]=g(()=>{},["stop"])),onChange:e[6]||(e[6]=r=>{if(r){const c=n.checkOptions.filter(v=>!v.disabled&&v.show!==!1).map(v=>v.value);o.$emit("update:modelValue",c)}else o.$emit("update:modelValue",[]);l.isIndeterminate=!1})},null,8,["modelValue","indeterminate"])]),_:1})):h("",!0),e[14]||(e[14]=F("div",{class:"check-all-margin"},null,-1)),y(L,{"model-value":t.modelValue,"onUpdate:modelValue":e[9]||(e[9]=r=>{o.$emit("update:modelValue",r)}),onChange:e[10]||(e[10]=r=>{const c=r.length,v=n.checkOptions.filter(S=>!S.disabled&&S.show!==!1).length;l.isCheckAll=c===v,l.isIndeterminate=c>0&&c<v})},{default:f(()=>[y(I,null,{default:f(()=>[(a(!0),m(w,null,C(n.checkOptions,r=>(a(),k(i,{key:r._key,clickable:"",title:r.label,onClick:()=>{t.modelValue.includes(r.value)?o.$emit("update:modelValue",t.modelValue.filter(c=>r.value!==c)):o.$emit("update:modelValue",[...t.modelValue,r.value])}},{"right-icon":f(()=>[y(s,{name:r.value,disabled:r.disabled,onClick:e[8]||(e[8]=g(()=>{},["stop"]))},null,8,["name","disabled"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["model-value"])])):(a(),k(M,{key:3,title:t.easyFormItemScope.placeholder,columns:n.columns,loading:t.easyFormItemScope.optionsLoading,onConfirm:n.onPickConfirm,onCancel:e[11]||(e[11]=r=>l.showPicker=!1)},null,8,["title","columns","loading","onConfirm"])),t.easyFormItemScope.getFormProps("allowCreate")&&l.searchKeyWord&&n.checkOptions.length===0?(a(),m("div",z,[y(j,{type:"primary",block:"",onClick:e[12]||(e[12]=()=>{n.createOption()})},{default:f(()=>e[15]||(e[15]=[V(" 点击添加选项 ")])),_:1})])):h("",!0)]),_:1},8,["show"])],2)}const H=_(B,[["render",q],["__scopeId","data-v-56425af0"]]),Y={props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:()=>""},easyFormItemScope:{type:[Object],default:()=>({})}},emits:["update:modelValue"],data(){return{showPicker:!1}},computed:{currentDate(){let o=new Date(this.modelValue);return o=isNaN(o.valueOf())?new Date:o,[o.getFullYear(),o.getMonth(),o.getDate()]}},methods:{onConfirm({selectedOptions:o}){this.showPicker=!1;const e=new Date(o.map(u=>u.value).join("-")),t=this.easyFormItemScope.getFormProps("valueFormat");t?this.$emit("update:modelValue",E(e).format(t)):this.$emit("update:modelValue",e)}}},G={key:0,class:"placeholder"},J={key:1,class:"popup-handler"};function Q(o,e,t,u,l,n){const p=d("van-date-picker"),s=d("van-popup");return a(),m("div",{class:P(["vant-date-picker",{"is-disabled":t.easyFormItemScope.disabled}])},[F("div",{class:"date-picker-inner",onClick:e[0]||(e[0]=()=>{t.easyFormItemScope.disabled||(l.showPicker=!0)})},[V(b(t.easyFormItemScope.viewValue)+" ",1),t.modelValue?h("",!0):(a(),m("div",G,b(t.easyFormItemScope.placeholder),1)),t.easyFormItemScope.disabled?h("",!0):(a(),m("div",J," 选择 "))]),y(s,{show:l.showPicker,"onUpdate:show":e[2]||(e[2]=i=>l.showPicker=i),position:"bottom"},{default:f(()=>[y(p,{modelValue:n.currentDate,title:"选择日期",onConfirm:n.onConfirm,onCancel:e[1]||(e[1]=i=>l.showPicker=!1)},null,8,["modelValue","onConfirm"])]),_:1},8,["show"])],2)}const X=_(Y,[["render",Q],["__scopeId","data-v-a34a1370"]]),Z={props:{modelValue:{type:[Array,String,Number,Boolean,Object],default:()=>""},easyFormItemScope:{type:[Object],default:()=>({})}},emits:["update:modelValue"]};function $(o,e,t,u,l,n){const p=d("van-radio"),s=d("van-radio-group");return a(),k(s,O({"model-value":t.modelValue,disabled:t.easyFormItemScope.disabled},{...t.easyFormItemScope.getPropValue(t.easyFormItemScope.field.formProps)||{}},{"onUpdate:modelValue":e[0]||(e[0]=i=>{o.$emit("update:modelValue",i)})}),{default:f(()=>[(a(!0),m(w,null,C(t.easyFormItemScope.options,i=>(a(),k(p,{key:i.key||i.value,name:i.value,disabled:i.disabled},{default:f(()=>[V(b(i.label),1)]),_:2},1032,["name","disabled"]))),128))]),_:1},16,["model-value","disabled"])}const ee=_(Z,[["render",$],["__scopeId","data-v-02da4bf5"]]),te={props:{fileList:{type:[Array],default:()=>[]},onChange:{type:Function,default:()=>{}},onRemove:{type:Function,default:()=>{}},easyFormItemScope:{type:[Object],default:()=>({})}},emits:["update:modelValue"],data(){return{vantFileList:[]}},watch:{fileList:{deep:!0,handler(o){Promise.all(o.map(async e=>({...e,file:e.file||e.raw,content:e.content?e.content:await this.blobToBase64(e.file||e.raw),objectUrl:e.objectUrl?e.objectUrl:URL.createObjectURL(e.file||e.raw)}))).then(e=>{this.vantFileList=e})}}},methods:{formatFileList(o){return o},filelist2ElStyle(o){return o.map(e=>({...e,name:e.file.name,raw:e.file,size:e.file.size,url:e.url?e.url:URL.createObjectURL(e.file)}))},blobToBase64(o){return new Promise((e,t)=>{const u=new FileReader;u.onload=l=>{e(l.target.result)},u.onerror=l=>{t(new Error("blobToBase64 error"))},u.readAsDataURL(o)})}}};function oe(o,e,t,u,l,n){const p=d("van-uploader");return a(),k(p,O({"model-value":l.vantFileList,"after-read":(s,i)=>{t.onChange(s,n.filelist2ElStyle([...t.fileList,...Array.isArray(s)?s:[s]]))},"before-delete":(s,i)=>{t.onRemove(s,t.fileList.filter(I=>I!==s))}},{maxCount:t.easyFormItemScope.getFormProps("limit")??1/0,...t.easyFormItemScope.getPropValue(t.easyFormItemScope.field.formProps)||{}},U(t.easyFormItemScope.getPropValue(t.easyFormItemScope.field.formListeners)||{})),null,16,["model-value","after-read","before-delete"])}const le=_(te,[["render",oe]]),re={components:{MDEditor:x},props:{modelValue:{type:String,default:()=>""},easyFormItemScope:{type:[Object],default:()=>({})}},emits:["update:modelValue"]};function ae(o,e,t,u,l,n){const p=d("MDEditor");return a(),k(p,{ref:"editor",style:{width:"100%"},modelValue:t.modelValue,disabled:t.easyFormItemScope.disabled,"show-default-handlers":[],"onUpdate:modelValue":e[0]||(e[0]=s=>{o.$emit("update:modelValue",s)})},null,8,["modelValue","disabled"])}const A=_(re,[["render",ae]]),Ce={MDEditor:A},Pe={select:H,"date-picker":X,radio:ee,upload:le,MDEditor:A};export{Pe as MOBILE,Ce as PC};
