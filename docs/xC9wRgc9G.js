import{P as u}from"./xCZNb2m2P.js";import{_ as b,u as c,aY as m,a8 as o,aZ as f,a_ as h,N as g,a$ as P,b as w,z as n,j as s,k as _}from"./assets/index--A2q1cxs.js";const y={components:{PageHeader:u},setup(){const{mobileMode:r}=c();return{mobileMode:r}},data(){return{tableData:[],tableProp:{tableConfig:{handlerWidth:"310px",tableProps:{stripe:!0,border:!0},tableHandlerProps:{fixed:void 0},publicTableProps:{showOverflowTooltip:!0},tableSelectionProps:{selectable:r=>!!r.filepath}},emitLoadOnCreate:!0,buttons:[{type:(r,e)=>e.row.running?"primary":"default",label:(r,e)=>e.row.running?"已开启":"已关闭",handler:(r,e)=>m(e.row.key,{running:!e.row.running}).then(()=>{this.$refs.EditTable.search()})},{type:"primary",buttonProps:{link:!0},label:"立即执行",handler:(r,e)=>{o({title:"提示",message:`确认立即执行${e.row.desp||e.row.jobName}`,type:"warning",closeOnLoading:!0,confirmHandlerPromise:t=>f(e.row.key).then(()=>{this.$refs.EditTable.search()})})}},{type:"danger",buttonProps:{link:!0},show:(r,e)=>!!e.row.isRunningDate,label:"移除运行标识",handler:(r,e)=>{o({title:"提示",message:`确认移除运行标识${e.row.desp||e.row.jobName}`,type:"warning",closeOnLoading:!0,confirmHandlerPromise:t=>h(e.row.key).then(()=>{this.$refs.EditTable.search()})})}}]},fields:[{type:"input",label:"执行时间",prop:"cronTime",tableProps:{minWidth:120}},{type:"input",label:"任务名",prop:"desp",tableProps:{minWidth:140,formatter:r=>r.desp||r.jobName}},{type:"select",label:"运行环境",prop:"env",options:[{label:"全部",value:"ALL"},{label:"开发环境",value:"DEV"},{label:"生产环境",value:"PROD"}],tableProps:{minWidth:120}},{type:"input",label:"下次运行时间",prop:"nextDates",tableProps:{width:180,formatter:(r,e,t)=>g(t)}}]}},methods:{onLoad(){return P().then(r=>({tableData:r,total:r.length}))}}},D={class:"page"};function k(r,e,t,v,a,l){const p=s("PageHeader"),i=s("edit-table");return _(),w("div",D,[n(p),n(i,{ref:"EditTable",modelValue:a.tableData,"onUpdate:modelValue":e[0]||(e[0]=d=>a.tableData=d),fields:a.fields,"table-prop":a.tableProp,"search-loader":l.onLoad},null,8,["modelValue","fields","table-prop","search-loader"])])}const O=b(y,[["render",k],["__scopeId","data-v-2cf68073"]]);export{O as default};
