const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./xCxyWslFj.js","./assets/index-XuEPjZ2L.js","./assets/index-Y6yRQqA7.css","./xgsQJOKWn.js","./xFcik7e6W.js","./xDSpHJm7g.js","./vander_commonjsHelpers-CqkleIqs.js","./xDrx6yAow.js","./xMvSHQ776.js","./xC1y7WPSF.js","./xBWWJZEeI.js","./xH0aXhqTP.js","./vander_baseFindIndex-D7XfJLKM.js","./assets/PreviewScreenshots-B76jYR2H.css","./assets/el-scrollbar-BWxh-h6K.css","./assets/el-popper-DG5wR-qi.css","./xDvOxsg3E.js","./xBAEHhs_B.js","./assets/MarkDown-BxBGots9.css","./xCBJFtePz.js","./assets/ImageCon-Ca6gO23F.css","./xDhYUEHJ8.js","./xHiUcIgGO.js","./vander_baseIteratee-C9OtqiIY.js","./x7oBk5Uup.js","./xBg8kLjh3.js","./xBMRLZB1x.js","./assets/MDEditor-FZqlXqPD.css","./assets/el-tag-DljBBxJR.css","./assets/el-select-BaQA8IKP.css","./assets/el-date-picker-BUDvp0ks.css"])))=>i.map(i=>d[i]);
import{_ as v,S as N,m as k,u as y,p as B,r as u,a as C,s as I,E as S,b as p,z as x,f as M,F as b,B as E,G as L,j as d,k as r,d as _,e as P,D as V,L as K}from"./assets/index-XuEPjZ2L.js";import{P as O}from"./xNGTsYP0D.js";import{N as W}from"./xBlipuIyM.js";import{C as D}from"./xBSHWlzhh.js";import"./xBAEHhs_B.js";/* empty css         *//* empty css         */import"./xBMRLZB1x.js";import"./xMvSHQ776.js";const G={components:{ChaosItem:D,PageHeader:O,NextButton:W,SvgIcon:N,MDEditor:k({loader:()=>V(()=>import("./xCxyWslFj.js").then(t=>t.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url),loadingComponent:K})},setup(){const{darkMode:t,isGreatOldOne:n}=y(),{offlineMode:l}=B(),o=u(""),h=C([]),a=u(!1),i=u(!1),g=u(null),m=f=>(i.value=!0,L(f).then(s=>{s=s.map(e=>({...e,id:`${e.author}-${e.id}`,mid:e.id,time:e.date,expend:!1})),a.value=s.length===10,h.push(...s)}).finally(()=>{i.value=!1}));return m(),{loading:i,searchBlogmoments:m,moments:h,searchKeyWord:o,offlineMode:l,hasNext:a,darkMode:t,setScorllGotoTop:I,isGreatOldOne:n,editing:g}},methods:{search(t){if(this.moments.splice(0,this.moments.length),this.offlineMode&&t&&!/^#\d+$/.test(t)){this.$msgBox.error("离线模式下仅可以使用id搜索");return}return this.searchBlogmoments({keyword:t})},onNext(){var n;const t=(n=this.moments[this.moments.length-1])==null?void 0:n.mid;return this.searchBlogmoments({keyword:this.searchKeyWord,start:t?t-1:void 0})},onSubmitUpdatemoment(t,n,l){if(t.mid)return S(t.mid,{content:n?void 0:l,hide:n?l||null:void 0}).then(o=>{Object.assign(t,o),this.editing=null})}}},U={class:"page"};function H(t,n,l,o,h,a){const i=d("PageHeader"),g=d("ChaosItem"),m=d("MDEditor"),f=d("SvgIcon"),s=d("NextButton");return r(),p("div",U,[x(i,{modelValue:o.searchKeyWord,"onUpdate:modelValue":n[0]||(n[0]=e=>o.searchKeyWord=e),"show-search-input":!0,"on-input":a.search},null,8,["modelValue","on-input"]),M("ul",null,[(r(!0),p(b,null,E(o.moments,e=>(r(),p("li",{key:e.mid,class:"moment-box"},[o.editing!==e?(r(),_(g,{key:0,essay:e,unsafeMode:!["leoon","dnick"].includes(e.author),useHashTag:!1,onSetSearchKeyWord:n[1]||(n[1]=c=>{o.searchKeyWord=c,o.setScorllGotoTop()})},null,8,["essay","unsafeMode"])):(r(),_(m,{key:1,"model-value":e.content,cache:!1,"ex-handlers":[{name:"取消",handler:()=>{o.editing=null}}],"on-submit":c=>a.onSubmitUpdatemoment(e,o.darkMode,c)},null,8,["model-value","ex-handlers","on-submit"])),o.isGreatOldOne&&o.editing!==e?(r(),_(f,{key:2,name:"bianji",onClick:c=>o.editing=e},null,8,["onClick"])):P("",!0)]))),128))]),x(s,{hasNext:o.hasNext,"onUpdate:hasNext":n[2]||(n[2]=e=>o.hasNext=e),loading:o.loading,"onUpdate:loading":n[3]||(n[3]=e=>o.loading=e),onLoadingClick:a.onNext},null,8,["hasNext","loading","onLoadingClick"])])}const Q=v(G,[["render",H],["__scopeId","data-v-a96fd519"]]);export{Q as default};
