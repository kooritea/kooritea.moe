import{_ as h,L as C,f0 as b,O as j,r as i,ad as k,f1 as R,c as u,k as m,b as _,T as U,n as S,W as w,e as y,I as x,d as F,j as N,U as P,f as V}from"./assets/index-CvIYzVtv.js";const W={components:{LoadingIcon:C},directives:{imgFadeEnter:b},props:{loading:{type:Boolean,default:()=>!0},src:{type:String,default:()=>""},alt:{type:String,default:()=>""},source:{type:String,default:()=>"jsdelivr"},sourceRepo:{type:String,default:()=>"kooritea/kooritea.github.io"},loadingType:{type:String,default:()=>"icon"},loadingDelay:{type:Number,default:()=>0},defaultImg:{type:String,default:()=>"/assets/404.png"}},setup(t,{emit:o,attrs:r}){const{computedLoading:e,computedSrc:s,computedLoadingDelay:c}=j(t,o),l=i(0),d=i(!1),n=i(!0),g=i(null),L=()=>{n.value=!0,g.value&&clearTimeout(g.value),g.value=setTimeout(()=>{n.value=!1},c.value)};L(),k(s,()=>{l.value=0,e.value=!0,L()});const f=i([]);R().then(a=>{d.value=!0,f.value=t.source==="static"?[]:[a]});const E=u(()=>t.src.startsWith("http")?[t.src]:f.value.length>0?f.value.map(a=>typeof a=="function"?a(t.sourceRepo,s.value):a+s.value):[s.value]),p=u(()=>E.value[l.value]),v=u(()=>l.value>=E.value.length),I=u(()=>v.value?"/assets/404.png":p.value);k(v,a=>{a&&(e.value=!1,typeof r.onError=="function"&&r.onError())});const B=a=>{e.value=!1,typeof r.onLoad=="function"&&r.onLoad(a)},T=a=>{l.value++},D=u(()=>e.value||n.value);return{computedLoadingDelay:c,jsdelivrBaseUrlListReady:d,isLoading:D,imageSrc:p,isError:v,onLoad:B,onError:T,applySrc:I}}},z=["src","alt","title"],H=["src"];function J(t,o,r,e,s,c){const l=N("LoadingIcon"),d=P("imgFadeEnter");return m(),_("div",{class:S(["image",{["loading-type-"+r.loadingType]:!0,error:e.isError,loading:e.isLoading}])},[!e.isError&&e.jsdelivrBaseUrlListReady?U((m(),_("img",{key:0,class:S(["img",{loading:e.isLoading}]),src:e.imageSrc,alt:r.alt,title:r.alt,onLoad:o[0]||(o[0]=(...n)=>e.onLoad&&e.onLoad(...n)),onError:o[1]||(o[1]=(...n)=>e.onError&&e.onError(...n)),onDragstart:o[2]||(o[2]=w(()=>{},["prevent"]))},null,42,z)),[[d,r.loadingType==="fade",e.computedLoadingDelay]]):y("",!0),e.isError?x(t.$slots,"error",{key:1},()=>[V("img",{class:"img",src:r.defaultImg},null,8,H)],!0):y("",!0),e.isLoading&&r.loadingType==="icon"?(m(),F(l,{key:2})):y("",!0)],2)}const O=h(W,[["render",J],["__scopeId","data-v-4db2570c"]]);export{O as I};
