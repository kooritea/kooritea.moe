import{d as L}from"./02b52d33.js";import{k as $e,u as He,l as ze,n as _e,o as Le,c as Ge,i as je,T as We,h as Ye,C as qe,j as Ie}from"./6ef2a505.js";import{b3 as Qe,bl as Ce,by as Xe,bG as De,bz as oe,c1 as xe,bA as ge,c3 as Ze,c as S,r as Ne,d as R,e as se,h as D,n as N,bk as t,t as ee,p as B,g as Ve,bX as fe,bf as Je,c2 as en,aU as nn,cn as tn,bv as O,bM as an,bx as Oe,bO as re,bm as Q,bN as q,a as sn,cp as rn,cc as ne,cl as ln,bS as on,aa as un,ai as cn,o as dn,c0 as pn,Q as Ee,bW as te,m as Pe,w as ye,f as ae,aw as mn,ga as fn,ak as Te,av as bn,al as vn,T as be,a6 as hn,bE as gn,bb as Vn,cr as Ae,bH as Nn}from"./assets/index-26dd84fe.js";import{b as Sn,i as kn}from"./6be5e2db.js";import{p as ve,q as Re,r as wn,t as _n}from"./a36f7331.js";function In(){}function En(n,c,o,s){for(var v=n.length,p=o+(s?1:-1);s?p--:++p<v;)if(c(n[p],p,n))return p;return-1}function Pn(n){return n!==n}function yn(n,c,o){for(var s=o-1,v=n.length;++s<v;)if(n[s]===c)return s;return-1}function Tn(n,c,o){return c===c?yn(n,c,o):En(n,Pn,o)}function An(n,c){var o=n==null?0:n.length;return!!o&&Tn(n,c,0)>-1}function Cn(n,c,o){for(var s=-1,v=n==null?0:n.length;++s<v;)if(o(c,n[s]))return!0;return!1}var Dn=1/0,xn=ve&&1/Re(new ve([,-0]))[1]==Dn?function(n){return new ve(n)}:In;const On=xn;var Rn=200;function Fn(n,c,o){var s=-1,v=An,p=n.length,i=!0,u=[],h=u;if(o)i=!1,v=Cn;else if(p>=Rn){var T=c?null:On(n);if(T)return Re(T);i=!1,v=_n,h=new wn}else h=c?[]:u;e:for(;++s<p;){var k=n[s],E=c?c(k):k;if(k=o||k!==0?k:0,i&&E===E){for(var x=h.length;x--;)if(h[x]===E)continue e;c&&h.push(E),u.push(k)}else v(h,E,o)||(h!==u&&h.push(E),u.push(k))}return u}var Mn=Sn(function(n){return Fn(Qe(n,1,kn,!0))});const he=Mn,Bn=Ce({...$e,parsedValue:{type:Xe(Array)}}),Kn=["disabled"],Un=oe({__name:"panel-time-range",props:Bn,emits:["pick","select-range","set-picker-option"],setup(n,{emit:c}){const o=n,s=(a,l)=>{const f=[];for(let g=a;g<=l;g++)f.push(g);return f},{t:v,lang:p}=xe(),i=ge("time"),u=ge("picker"),h=Ze("EP_PICKER_BASE"),{arrowControl:T,disabledHours:k,disabledMinutes:E,disabledSeconds:x,defaultValue:K}=h.props,F=S(()=>[i.be("range-picker","body"),i.be("panel","content"),i.is("arrow",T),y.value?"has-seconds":""]),G=S(()=>[i.be("range-picker","body"),i.be("panel","content"),i.is("arrow",T),y.value?"has-seconds":""]),P=S(()=>o.parsedValue[0]),A=S(()=>o.parsedValue[1]),X=He(o),j=()=>{c("pick",X.value,!1)},y=S(()=>o.format.includes("ss")),W=S(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),U=(a=!1)=>{c("pick",[P.value,A.value],a)},ie=a=>{Z(a.millisecond(0),A.value)},ue=a=>{Z(P.value,a.millisecond(0))},ce=a=>{const l=a.map(g=>L(g).locale(p.value)),f=M(l);return l[0].isSame(f[0])&&l[1].isSame(f[1])},Z=(a,l)=>{c("pick",[a,l],!0)},de=S(()=>P.value>A.value),$=Ne([0,2]),Y=(a,l)=>{c("select-range",a,l,"min"),$.value=[a,l]},J=S(()=>y.value?11:8),e=(a,l)=>{c("select-range",a,l,"max");const f=t(J);$.value=[a+f,l+f]},r=a=>{const l=y.value?[0,3,6,11,14,17]:[0,3,8,11],f=["hours","minutes"].concat(y.value?["seconds"]:[]),_=(l.indexOf($.value[0])+a+l.length)%l.length,I=l.length/2;_<I?pe.start_emitSelectRange(f[_]):pe.end_emitSelectRange(f[_-I])},d=a=>{const l=a.code,{left:f,right:g,up:_,down:I}=Je;if([f,g].includes(l)){r(l===f?-1:1),a.preventDefault();return}if([_,I].includes(l)){const C=l===_?-1:1,z=$.value[0]<J.value?"start":"end";pe[`${z}_scrollDown`](C),a.preventDefault();return}},b=(a,l)=>{const f=k?k(a):[],g=a==="start",I=(l||(g?A.value:P.value)).hour(),C=g?s(I+1,23):s(0,I-1);return he(f,C)},m=(a,l,f)=>{const g=E?E(a,l):[],_=l==="start",I=f||(_?A.value:P.value),C=I.hour();if(a!==C)return g;const z=I.minute(),me=_?s(z+1,59):s(0,z-1);return he(g,me)},w=(a,l,f,g)=>{const _=x?x(a,l,f):[],I=f==="start",C=g||(I?A.value:P.value),z=C.hour(),me=C.minute();if(a!==z||l!==me)return _;const we=C.second(),Ue=I?s(we+1,59):s(0,we-1);return he(_,Ue)},M=([a,l])=>[Se(a,"start",!0,l),Se(l,"end",!1,a)],{getAvailableHours:H,getAvailableMinutes:V,getAvailableSeconds:Fe}=ze(b,m,w),{timePickerOptions:pe,getAvailableTime:Se,onSetOption:ke}=Le({getAvailableHours:H,getAvailableMinutes:V,getAvailableSeconds:Fe}),Me=a=>a?fe(a)?a.map(l=>L(l,o.format).locale(p.value)):L(a,o.format).locale(p.value):null,Be=a=>a?fe(a)?a.map(l=>l.format(o.format)):a.format(o.format):null,Ke=()=>{if(fe(K))return K.map(l=>L(l).locale(p.value));const a=L(K).locale(p.value);return[a,a.add(60,"m")]};return c("set-picker-option",["formatToString",Be]),c("set-picker-option",["parseUserInput",Me]),c("set-picker-option",["isValidValue",ce]),c("set-picker-option",["handleKeydownInput",d]),c("set-picker-option",["getDefaultValue",Ke]),c("set-picker-option",["getRangeAvailableTime",M]),(a,l)=>a.actualVisible?(R(),se("div",{key:0,class:N([t(i).b("range-picker"),t(u).b("panel")])},[D("div",{class:N(t(i).be("range-picker","content"))},[D("div",{class:N(t(i).be("range-picker","cell"))},[D("div",{class:N(t(i).be("range-picker","header"))},ee(t(v)("el.datepicker.startTime")),3),D("div",{class:N(t(F))},[B(_e,{ref:"minSpinner",role:"start","show-seconds":t(y),"am-pm-mode":t(W),"arrow-control":t(T),"spinner-date":t(P),"disabled-hours":b,"disabled-minutes":m,"disabled-seconds":w,onChange:ie,onSetOption:t(ke),onSelectRange:Y},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),D("div",{class:N(t(i).be("range-picker","cell"))},[D("div",{class:N(t(i).be("range-picker","header"))},ee(t(v)("el.datepicker.endTime")),3),D("div",{class:N(t(G))},[B(_e,{ref:"maxSpinner",role:"end","show-seconds":t(y),"am-pm-mode":t(W),"arrow-control":t(T),"spinner-date":t(A),"disabled-hours":b,"disabled-minutes":m,"disabled-seconds":w,onChange:ue,onSetOption:t(ke),onSelectRange:e},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),D("div",{class:N(t(i).be("panel","footer"))},[D("button",{type:"button",class:N([t(i).be("panel","btn"),"cancel"]),onClick:l[0]||(l[0]=f=>j())},ee(t(v)("el.datepicker.cancel")),3),D("button",{type:"button",class:N([t(i).be("panel","btn"),"confirm"]),disabled:t(de),onClick:l[1]||(l[1]=f=>U())},ee(t(v)("el.datepicker.confirm")),11,Kn)],2)],2)):Ve("v-if",!0)}});var $n=De(Un,[["__file","panel-time-range.vue"]]);L.extend(Ge);var Hn=oe({name:"ElTimePicker",install:null,props:{...je,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,c){const o=Ne(),[s,v]=n.isRange?["timerange",$n]:["time",We],p=i=>c.emit("update:modelValue",i);return en("ElPopperOptions",n.popperOptions),c.expose({focus:i=>{var u;(u=o.value)==null||u.handleFocusInput(i)},blur:i=>{var u;(u=o.value)==null||u.handleBlurInput(i)},handleOpen:()=>{var i;(i=o.value)==null||i.handleOpen()},handleClose:()=>{var i;(i=o.value)==null||i.handleClose()}}),()=>{var i;const u=(i=n.format)!=null?i:Ye;return B(qe,nn(n,{ref:o,type:s,format:u,"onUpdate:modelValue":p}),{default:h=>B(v,h,null)})}}});const le=Hn;le.install=n=>{n.component(le.name,le)};const nt=le,zn=Ce({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:tn,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||O(n)||["min","max"].includes(n),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...an(["ariaLabel"])}),Ln={[Oe]:(n,c)=>c!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[re]:n=>O(n)||Q(n),[q]:n=>O(n)||Q(n)},Gn=["aria-label","onKeydown"],jn=["aria-label","onKeydown"],Wn=oe({name:"ElInputNumber"}),Yn=oe({...Wn,props:zn,emits:Ln,setup(n,{expose:c,emit:o}){const s=n,{t:v}=xe(),p=ge("input-number"),i=Ne(),u=sn({currentValue:s.modelValue,userInput:null}),{formItem:h}=rn(),T=S(()=>O(s.modelValue)&&s.modelValue<=s.min),k=S(()=>O(s.modelValue)&&s.modelValue>=s.max),E=S(()=>{const e=A(s.step);return ne(s.precision)?Math.max(A(s.modelValue),e):(e>s.precision,s.precision)}),x=S(()=>s.controls&&s.controlsPosition==="right"),K=ln(),F=on(),G=S(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(Q(e))return"";if(O(e)){if(Number.isNaN(e))return"";ne(s.precision)||(e=e.toFixed(s.precision))}return e}),P=(e,r)=>{if(ne(r)&&(r=E.value),r===0)return Math.round(e);let d=String(e);const b=d.indexOf(".");if(b===-1||!d.replace(".","").split("")[b+r])return e;const M=d.length;return d.charAt(M-1)==="5"&&(d=`${d.slice(0,Math.max(0,M-1))}6`),Number.parseFloat(Number(d).toFixed(r))},A=e=>{if(Q(e))return 0;const r=e.toString(),d=r.indexOf(".");let b=0;return d!==-1&&(b=r.length-d-1),b},X=(e,r=1)=>O(e)?P(e+s.step*r):u.currentValue,j=()=>{if(s.readonly||F.value||k.value)return;const e=Number(G.value)||0,r=X(e);U(r),o(re,u.currentValue),Y()},y=()=>{if(s.readonly||F.value||T.value)return;const e=Number(G.value)||0,r=X(e,-1);U(r),o(re,u.currentValue),Y()},W=(e,r)=>{const{max:d,min:b,step:m,precision:w,stepStrictly:M,valueOnClear:H}=s;d<b&&gn("InputNumber","min should not be greater than max.");let V=Number(e);if(Q(e)||Number.isNaN(V))return null;if(e===""){if(H===null)return null;V=Vn(H)?{min:b,max:d}[H]:H}return M&&(V=P(Math.round(V/m)*m,w)),ne(w)||(V=P(V,w)),(V>d||V<b)&&(V=V>d?d:b,r&&o(q,V)),V},U=(e,r=!0)=>{var d;const b=u.currentValue,m=W(e);if(!r){o(q,m);return}b===m&&e||(u.userInput=null,o(q,m),b!==m&&o(Oe,m,b),s.validateEvent&&((d=h==null?void 0:h.validate)==null||d.call(h,"change").catch(w=>Ae())),u.currentValue=m)},ie=e=>{u.userInput=e;const r=e===""?null:Number(e);o(re,r),U(r,!1)},ue=e=>{const r=e!==""?Number(e):"";(O(r)&&!Number.isNaN(r)||e==="")&&U(r),Y(),u.userInput=null},ce=()=>{var e,r;(r=(e=i.value)==null?void 0:e.focus)==null||r.call(e)},Z=()=>{var e,r;(r=(e=i.value)==null?void 0:e.blur)==null||r.call(e)},de=e=>{o("focus",e)},$=e=>{var r;u.userInput=null,o("blur",e),s.validateEvent&&((r=h==null?void 0:h.validate)==null||r.call(h,"blur").catch(d=>Ae()))},Y=()=>{u.currentValue!==s.modelValue&&(u.currentValue=s.modelValue)},J=e=>{document.activeElement===e.target&&e.preventDefault()};return un(()=>s.modelValue,(e,r)=>{const d=W(e,!0);u.userInput===null&&d!==r&&(u.currentValue=d)},{immediate:!0}),cn(()=>{var e;const{min:r,max:d,modelValue:b}=s,m=(e=i.value)==null?void 0:e.input;if(m.setAttribute("role","spinbutton"),Number.isFinite(d)?m.setAttribute("aria-valuemax",String(d)):m.removeAttribute("aria-valuemax"),Number.isFinite(r)?m.setAttribute("aria-valuemin",String(r)):m.removeAttribute("aria-valuemin"),m.setAttribute("aria-valuenow",u.currentValue||u.currentValue===0?String(u.currentValue):""),m.setAttribute("aria-disabled",String(F.value)),!O(b)&&b!=null){let w=Number(b);Number.isNaN(w)&&(w=null),o(q,w)}m.addEventListener("wheel",J,{passive:!1})}),dn(()=>{var e,r;const d=(e=i.value)==null?void 0:e.input;d==null||d.setAttribute("aria-valuenow",`${(r=u.currentValue)!=null?r:""}`)}),pn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},S(()=>!!s.label)),c({focus:ce,blur:Z}),(e,r)=>(R(),se("div",{class:N([t(p).b(),t(p).m(t(K)),t(p).is("disabled",t(F)),t(p).is("without-controls",!e.controls),t(p).is("controls-right",t(x))]),onDragstart:r[0]||(r[0]=be(()=>{},["prevent"]))},[e.controls?Ee((R(),se("span",{key:0,role:"button","aria-label":t(v)("el.inputNumber.decrease"),class:N([t(p).e("decrease"),t(p).is("disabled",t(T))]),onKeydown:te(y,["enter"])},[Pe(e.$slots,"decrease-icon",{},()=>[B(t(Te),null,{default:ye(()=>[t(x)?(R(),ae(t(mn),{key:0})):(R(),ae(t(fn),{key:1}))]),_:1})])],42,Gn)),[[t(Ie),y]]):Ve("v-if",!0),e.controls?Ee((R(),se("span",{key:1,role:"button","aria-label":t(v)("el.inputNumber.increase"),class:N([t(p).e("increase"),t(p).is("disabled",t(k))]),onKeydown:te(j,["enter"])},[Pe(e.$slots,"increase-icon",{},()=>[B(t(Te),null,{default:ye(()=>[t(x)?(R(),ae(t(bn),{key:0})):(R(),ae(t(vn),{key:1}))]),_:1})])],42,jn)),[[t(Ie),j]]):Ve("v-if",!0),B(t(hn),{id:e.id,ref_key:"input",ref:i,type:"number",step:e.step,"model-value":t(G),placeholder:e.placeholder,readonly:e.readonly,disabled:t(F),size:t(K),max:e.max,min:e.min,name:e.name,"aria-label":e.label||e.ariaLabel,"validate-event":!1,onKeydown:[te(be(j,["prevent"]),["up"]),te(be(y,["prevent"]),["down"])],onBlur:$,onFocus:de,onInput:ie,onChange:ue},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}});var qn=De(Yn,[["__file","input-number.vue"]]);const tt=Nn(qn);export{tt as E,nt as a,En as b,zn as c,Ln as i};
