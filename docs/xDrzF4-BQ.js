import{_ as h,S as y,L as S,r as s,f0 as k,ac as L,al as V,b as i,z as p,V as C,F as E,d as N,e as m,j as v,k as a}from"./assets/index-BJYhPSJA.js";import{I as x}from"./xBU5ceHTG.js";const F=""+new URL("assets/404.png",import.meta.url).href,w={components:{SvgIcon:y,ImageCon:x,LoadingIcon:S},props:{content:{type:String,default:""}},setup(f){const e=f.content.match(/\[video(-loop)? (.*?)\]/),n=e[2],o=s(!1),l=s(!0),u=s(!1),c=n.slice(0,n.lastIndexOf("."))+".thumbnail",t=s(""),r=s(null),b=s(!1),I=s(!!e[1]),g=s(n.startsWith("http"));g.value?(t.value=n,l.value=!1):k().then(d=>{t.value=d("kooritea/kooritea.github.io",`video${n}`),l.value=!1});const _=new IntersectionObserver(d=>{d[0].isIntersecting||(o.value=!1)});return L(r,()=>{r.value&&_.observe(r.value)}),V(()=>{_.disconnect()}),{isFullSrc:g,videoSrc:t,videoRef:r,thumbnailSrc:c,isNoThumbnail:u,isPlay:o,isLoop:I,isLoading:l,isVideoError:b}}},B={class:"md-video"},T={key:0,class:"thumbnail-box"},P=["autoplay","src","loop"],R={key:2,class:"error-img",src:F};function U(f,e,n,o,l,u){const c=v("ImageCon"),t=v("SvgIcon"),r=v("LoadingIcon");return a(),i("div",B,[!o.isPlay&&!o.isNoThumbnail&&!o.isFullSrc?(a(),i("div",T,[p(c,{ref:"ImageCon",src:`/video${o.thumbnailSrc}`,alt:o.thumbnailSrc,onClick:e[0]||(e[0]=()=>{o.isPlay=!0}),onDragstart:e[1]||(e[1]=C(()=>{},["prevent"])),onError:e[2]||(e[2]=()=>{o.isNoThumbnail=!0})},null,8,["src","alt"]),p(t,{class:"play-icon",name:"play"})])):(a(),i(E,{key:1},[o.isLoading?(a(),N(r,{key:0})):m("",!0),!o.isLoading&&!o.isVideoError?(a(),i("video",{key:1,ref:"videoRef",class:"video",autoplay:!o.isNoThumbnail&&!o.isFullSrc,controls:"",src:o.videoSrc,loop:o.isLoop,onError:e[3]||(e[3]=()=>{o.isVideoError=!0})},null,40,P)):m("",!0),o.isVideoError?(a(),i("img",R)):m("",!0)],64))])}const O=h(w,[["render",U],["__scopeId","data-v-f2aaeb3c"]]);export{O as default};
